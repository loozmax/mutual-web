{"ast":null,"code":"import { __decorate, __param } from 'tslib';\nimport { InjectionToken, Optional, Self, Inject, ChangeDetectorRef, ViewChild, Input, HostListener, Component, ChangeDetectionStrategy, forwardRef, NgModule } from '@angular/core';\nimport { NgControl, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AbstractTuiControl, isNativeFocused, tuiDefaultProp, TUI_FOCUSABLE_ITEM_ACCESSOR, TuiFocusableModule, TuiRepeatTimesModule } from '@taiga-ui/cdk';\nimport { TuiSvgModule } from '@taiga-ui/core';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@taiga-ui/cdk';\nimport * as ɵngcc2 from '@taiga-ui/core';\nimport * as ɵngcc3 from '@angular/forms';\nconst _c0 = [\"focusableElement\"];\n\nfunction TuiRatingComponent_tui_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"tui-svg\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function TuiRatingComponent_tui_svg_4_Template_tui_svg_click_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r6);\n      const index_r4 = restoredCtx.$implicit;\n      const ctx_r5 = ɵngcc0.ɵɵnextContext();\n      return ctx_r5.setRateByReverseIndex(index_r4);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r0.iconFilled);\n  }\n}\n\nfunction TuiRatingComponent_tui_svg_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"tui-svg\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r1.iconFilled);\n  }\n}\n\nfunction TuiRatingComponent_tui_svg_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"tui-svg\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r2.iconNormal);\n  }\n}\n\nconst _c1 = [\"*\"];\nconst TUI_RATING_DEFAULT_OPTIONS = {\n  min: 0,\n  max: 5,\n  iconNormal: 'tuiIconStarLarge',\n  iconFilled: 'tuiIconStarFilledLarge'\n};\nconst TUI_RATING_OPTIONS = new InjectionToken('Default parameters for rating component', {\n  factory: () => TUI_RATING_DEFAULT_OPTIONS\n});\n\nconst tuiRatingOptionsProvider = options => ({\n  provide: TUI_RATING_OPTIONS,\n  useValue: Object.assign(Object.assign({}, TUI_RATING_DEFAULT_OPTIONS), options)\n});\n\nvar TuiRatingComponent_1;\nlet TuiRatingComponent = TuiRatingComponent_1 = class TuiRatingComponent extends AbstractTuiControl {\n  constructor(ngControl, changeDetectorRef, options) {\n    super(ngControl, changeDetectorRef);\n    this.options = options;\n    this.min = this.options.min;\n    this.max = this.options.max;\n    this.iconNormal = this.options.iconNormal;\n    this.iconFilled = this.options.iconFilled;\n  }\n\n  get nativeFocusableElement() {\n    return this.computedDisabled || !this.focusableElement ? null : this.focusableElement.nativeElement;\n  }\n\n  get focused() {\n    return isNativeFocused(this.nativeFocusableElement);\n  }\n\n  get isFocusable() {\n    return !(this.readOnly || this.disabled);\n  }\n\n  get percent() {\n    return 100 * this.value / this.max;\n  }\n\n  onFocused(focused) {\n    this.updateFocused(focused);\n  }\n\n  setRateByReverseIndex(index) {\n    this.updateValue(this.max - index);\n  }\n\n  setRate(value) {\n    this.updateValue(value);\n  }\n\n  getFallbackValue() {\n    return 0;\n  }\n\n};\n\nTuiRatingComponent.ɵfac = function TuiRatingComponent_Factory(t) {\n  return new (t || TuiRatingComponent)(ɵngcc0.ɵɵdirectiveInject(NgControl, 10), ɵngcc0.ɵɵdirectiveInject(ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(TUI_RATING_OPTIONS));\n};\n\nTuiRatingComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: TuiRatingComponent,\n  selectors: [[\"tui-rating\"]],\n  viewQuery: function TuiRatingComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.focusableElement = _t.first);\n    }\n  },\n  hostBindings: function TuiRatingComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"focusin\", function TuiRatingComponent_focusin_HostBindingHandler() {\n        return ctx.onFocused(true);\n      })(\"focusout\", function TuiRatingComponent_focusout_HostBindingHandler() {\n        return ctx.onFocused(false);\n      });\n    }\n  },\n  inputs: {\n    min: \"min\",\n    max: \"max\",\n    iconNormal: \"iconNormal\",\n    iconFilled: \"iconFilled\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n    useExisting: forwardRef(() => TuiRatingComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  ngContentSelectors: _c1,\n  decls: 10,\n  vars: 9,\n  consts: [[1, \"t-host\"], [1, \"t-interactive\"], [\"class\", \"t-icon-filled\", 3, \"src\", \"click\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [1, \"t-wrapper\"], [\"class\", \"t-icon-filled\", 3, \"src\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [3, \"src\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"type\", \"range\", \"step\", \"1\", 1, \"t-input\", 3, \"min\", \"max\", \"ngModel\", \"tuiFocusable\", \"ngModelChange\"], [\"focusableElement\", \"\"], [1, \"t-icon-filled\", 3, \"src\", \"click\"], [1, \"t-icon-filled\", 3, \"src\"], [3, \"src\"]],\n  template: function TuiRatingComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵprojectionDef();\n      ɵngcc0.ɵɵelementStart(0, \"label\");\n      ɵngcc0.ɵɵprojection(1);\n      ɵngcc0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1);\n      ɵngcc0.ɵɵtemplate(4, TuiRatingComponent_tui_svg_4_Template, 1, 1, \"tui-svg\", 2);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(5, \"div\", 3);\n      ɵngcc0.ɵɵtemplate(6, TuiRatingComponent_tui_svg_6_Template, 1, 1, \"tui-svg\", 4);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(7, TuiRatingComponent_tui_svg_7_Template, 1, 1, \"tui-svg\", 5);\n      ɵngcc0.ɵɵelementStart(8, \"input\", 6, 7);\n      ɵngcc0.ɵɵlistener(\"ngModelChange\", function TuiRatingComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.setRate($event);\n      });\n      ɵngcc0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(4);\n      ɵngcc0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.max);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵstyleProp(\"width\", ctx.percent, \"%\");\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.max);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.max);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"min\", ctx.min)(\"max\", ctx.max)(\"ngModel\", ctx.value)(\"tuiFocusable\", ctx.isFocusable);\n    }\n  },\n  directives: [ɵngcc1.TuiRepeatTimesDirective, ɵngcc2.TuiSvgComponent, ɵngcc3.RangeValueAccessor, ɵngcc3.DefaultValueAccessor, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc1.TuiFocusableDirective],\n  styles: [\"._disabled[_nghost-%COMP%], ._readonly[_nghost-%COMP%]{pointer-events:none}._disabled[_nghost-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-host[_ngcontent-%COMP%]{position:relative;display:inline-flex}.t-input[_ngcontent-%COMP%]{pointer-events:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0}.t-input[_ngcontent-%COMP%]::-webkit-slider-thumb{display:none}.t-input[_ngcontent-%COMP%]::-moz-range-thumb{opacity:0}.t-input[_ngcontent-%COMP%], .t-interactive[_ngcontent-%COMP%], .t-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:100%;height:100%}.t-interactive[_ngcontent-%COMP%], .t-wrapper[_ngcontent-%COMP%]{display:inline-flex;overflow:hidden;flex-direction:row-reverse;justify-content:flex-end;white-space:nowrap}.t-wrapper[_ngcontent-%COMP%]{pointer-events:none}.t-interactive[_ngcontent-%COMP%]{opacity:0}@media (hover:hover) and (pointer:fine){.t-interactive[_ngcontent-%COMP%]:hover{opacity:1}.t-interactive[_ngcontent-%COMP%]:hover ~ .t-wrapper[_ngcontent-%COMP%]{visibility:hidden}.t-interactive[_ngcontent-%COMP%]:hover   .t-icon-filled[_ngcontent-%COMP%]{opacity:0}.t-interactive[_ngcontent-%COMP%]:hover   .t-icon-filled[_ngcontent-%COMP%]:hover, .t-interactive[_ngcontent-%COMP%]:hover   .t-icon-filled[_ngcontent-%COMP%]:hover ~ .t-icon-filled[_ngcontent-%COMP%]{opacity:1}}.t-icon-filled[_ngcontent-%COMP%]{position:relative;cursor:pointer}\"],\n  changeDetection: 0\n});\n\nTuiRatingComponent.ctorParameters = () => [{\n  type: NgControl,\n  decorators: [{\n    type: Optional\n  }, {\n    type: Self\n  }, {\n    type: Inject,\n    args: [NgControl]\n  }]\n}, {\n  type: ChangeDetectorRef,\n  decorators: [{\n    type: Inject,\n    args: [ChangeDetectorRef]\n  }]\n}, {\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [TUI_RATING_OPTIONS]\n  }]\n}];\n\n__decorate([ViewChild('focusableElement')], TuiRatingComponent.prototype, \"focusableElement\", void 0);\n\n__decorate([Input(), tuiDefaultProp()], TuiRatingComponent.prototype, \"min\", void 0);\n\n__decorate([Input(), tuiDefaultProp()], TuiRatingComponent.prototype, \"max\", void 0);\n\n__decorate([Input(), tuiDefaultProp()], TuiRatingComponent.prototype, \"iconNormal\", void 0);\n\n__decorate([Input(), tuiDefaultProp()], TuiRatingComponent.prototype, \"iconFilled\", void 0);\n\n__decorate([HostListener('focusin', ['true']), HostListener('focusout', ['false'])], TuiRatingComponent.prototype, \"onFocused\", null);\n\nTuiRatingComponent = TuiRatingComponent_1 = __decorate([__param(0, Optional()), __param(0, Self()), __param(0, Inject(NgControl)), __param(1, Inject(ChangeDetectorRef)), __param(2, Inject(TUI_RATING_OPTIONS))], TuiRatingComponent);\nlet TuiRatingModule = /*#__PURE__*/(() => {\n  let TuiRatingModule = class TuiRatingModule {};\n\n  TuiRatingModule.ɵfac = function TuiRatingModule_Factory(t) {\n    return new (t || TuiRatingModule)();\n  };\n\n  TuiRatingModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiRatingModule\n  });\n  TuiRatingModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[TuiSvgModule, TuiFocusableModule, TuiRepeatTimesModule, FormsModule, ReactiveFormsModule]]\n  });\n  return TuiRatingModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiRatingModule, {\n    declarations: function () {\n      return [TuiRatingComponent];\n    },\n    imports: function () {\n      return [TuiSvgModule, TuiFocusableModule, TuiRepeatTimesModule, FormsModule, ReactiveFormsModule];\n    },\n    exports: function () {\n      return [TuiRatingComponent];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { TUI_RATING_DEFAULT_OPTIONS, TUI_RATING_OPTIONS, TuiRatingComponent, TuiRatingModule, tuiRatingOptionsProvider }; //# sourceMappingURL=taiga-ui-kit-components-rating.js.map","map":null,"metadata":{},"sourceType":"module"}