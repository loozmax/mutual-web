{"ast":null,"code":"import { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport { FormBaseViewModel } from \"src/libraries/form-base-view-model\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/room.service\";\nimport * as i2 from \"src/app/services/user.base.service\";\nimport * as i3 from \"src/app/services/global-notification.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@taiga-ui/kit\";\nimport * as i7 from \"@taiga-ui/core\";\nimport * as i8 from \"@taiga-ui/core/components/button\";\nexport let CreateRoomComponent = /*#__PURE__*/(() => {\n  class CreateRoomComponent extends FormBaseViewModel {\n    constructor(_roomService, _userBaseService, _notificationService, _router) {\n      super();\n      this._roomService = _roomService;\n      this._userBaseService = _userBaseService;\n      this._notificationService = _notificationService;\n      this._router = _router;\n      this._onDestroy$ = new Subject();\n    }\n\n    createRoom() {\n      this._userBaseService.getUser().subscribe(user => {\n        this._roomService.createRoom(this.getFormValue('projectName'), parseFloat(user.id)).pipe(takeUntil(this._onDestroy$)).subscribe({\n          next: () => {\n            this._router.navigate(['rooms', 'main']);\n\n            this._notificationService.subject$.next({\n              status: 'success',\n              text: 'Комната успешно создана'\n            });\n          },\n          error: () => {\n            this._notificationService.subject$.next({\n              status: 'error',\n              text: 'Ошибка при создании комнаты'\n            });\n          }\n        });\n      });\n    }\n\n    ngOnDestroy() {\n      this._onDestroy$.next();\n    }\n\n    getControls() {\n      return new FormGroup({\n        projectDescription: new FormControl('', [Validators.required]),\n        projectName: new FormControl('', [Validators.required])\n      });\n    }\n\n  }\n\n  CreateRoomComponent.ɵfac = function CreateRoomComponent_Factory(t) {\n    return new (t || CreateRoomComponent)(i0.ɵɵdirectiveInject(i1.RoomService), i0.ɵɵdirectiveInject(i2.UserBaseService), i0.ɵɵdirectiveInject(i3.GlobalNotificationService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n\n  CreateRoomComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateRoomComponent,\n    selectors: [[\"ng-component\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 14,\n    vars: 2,\n    consts: [[1, \"room\", 3, \"formGroup\"], [\"formControlName\", \"projectName\", 1, \"room__name_field\"], [\"tuiTextfield\", \"\", \"placeholder\", \"\", \"type\", \"text\"], [\"formControlName\", \"projectDescription\", 1, \"room__description_field\"], [\"tuiButton\", \"\", \"type\", \"button\", \"appearance\", \"accent\", 1, \"room__button\", 3, \"disabled\", \"click\"]],\n    template: function CreateRoomComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u043E\\u043C\\u043D\\u0430\\u0442\\u0443\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\")(4, \"tui-input\", 1);\n        i0.ɵɵtext(5, \" \\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430 \");\n        i0.ɵɵelement(6, \"input\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\")(8, \"tui-input\", 3);\n        i0.ɵɵtext(9, \" \\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430 \");\n        i0.ɵɵelement(10, \"input\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\")(12, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function CreateRoomComponent_Template_button_click_12_listener() {\n          return ctx.createRoom();\n        });\n        i0.ɵɵtext(13, \" \\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u043E\\u043C\\u043D\\u0430\\u0442\\u0443 \");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.controlsGroup);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"disabled\", !ctx.controlsGroup.valid);\n      }\n    },\n    directives: [i5.NgControlStatusGroup, i5.FormGroupDirective, i6.TuiInputComponent, i6.TuiInputDirective, i5.NgControlStatus, i5.FormControlName, i7.TuiTextfieldComponent, i8.TuiButtonComponent],\n    styles: [\".room[_ngcontent-%COMP%]{width:80%;margin:0 auto}.room[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:80px;margin-bottom:80px;font-size:80px;text-align:left}.room__name_field[_ngcontent-%COMP%], .room__description_field[_ngcontent-%COMP%]{border-radius:0;margin-bottom:16px}.room__button[_ngcontent-%COMP%]{width:100%;border-radius:0;margin-top:100px;margin-bottom:110px}\"]\n  });\n  return CreateRoomComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}