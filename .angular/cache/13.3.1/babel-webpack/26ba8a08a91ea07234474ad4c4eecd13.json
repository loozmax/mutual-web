{"ast":null,"code":"import { __decorate, __param } from 'tslib';\nimport { Directive, ElementRef, Inject, Input, HostBinding, HostListener, Component, ChangeDetectionStrategy, NgModule } from '@angular/core';\nimport { TUI_SCROLL_REF } from '@taiga-ui/core/tokens';\nimport { TUI_SCROLLABLE, TUI_SCROLL_INTO_VIEW } from '@taiga-ui/core/constants';\nimport { CSS, USER_AGENT } from '@ng-web-apis/common';\nimport { isFirefox, getElementOffset, TUI_IS_IOS, tuiDefaultProp } from '@taiga-ui/cdk';\nimport { CommonModule } from '@angular/common';\nimport { TuiScrollControlsModule } from '@taiga-ui/core/components/scroll-controls';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nimport * as ɵngcc2 from '@taiga-ui/core/components/scroll-controls';\n\nfunction TuiScrollbarComponent_tui_scroll_controls_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"tui-scroll-controls\");\n  }\n}\n\nconst _c0 = [\"*\"];\nconst SCROLL_REF_SELECTOR = '[tuiScrollRef]';\nlet TuiScrollRefDirective = /*#__PURE__*/(() => {\n  let TuiScrollRefDirective = class TuiScrollRefDirective {};\n\n  TuiScrollRefDirective.ɵfac = function TuiScrollRefDirective_Factory(t) {\n    return new (t || TuiScrollRefDirective)();\n  };\n\n  TuiScrollRefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TuiScrollRefDirective,\n    selectors: [[\"\", \"tuiScrollRef\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: TUI_SCROLL_REF,\n      useExisting: ElementRef\n    }])]\n  });\n  return TuiScrollRefDirective;\n})();\nlet TuiScrollableDirective = /*#__PURE__*/(() => {\n  let TuiScrollableDirective = class TuiScrollableDirective {\n    constructor(elementRef) {\n      this.elementRef = elementRef;\n    }\n\n    ngOnInit() {\n      this.elementRef.nativeElement.dispatchEvent(new CustomEvent(TUI_SCROLLABLE, {\n        bubbles: true,\n        detail: this.elementRef.nativeElement\n      }));\n    }\n\n  };\n\n  TuiScrollableDirective.ɵfac = function TuiScrollableDirective_Factory(t) {\n    return new (t || TuiScrollableDirective)(ɵngcc0.ɵɵdirectiveInject(ElementRef));\n  };\n\n  TuiScrollableDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: TuiScrollableDirective,\n    selectors: [[\"\", \"tuiScrollable\", \"\"]]\n  });\n  TuiScrollableDirective = __decorate([__param(0, Inject(ElementRef))], TuiScrollableDirective);\n  return TuiScrollableDirective;\n})();\nvar TuiScrollbarComponent_1;\n\nfunction scrollRefFactory({\n  browserScrollRef\n}) {\n  return browserScrollRef;\n} // @dynamic\n\n\nlet TuiScrollbarComponent = TuiScrollbarComponent_1 = class TuiScrollbarComponent {\n  constructor(\n  /**\n   * TODO: remove \"any\" in new TS version; https://github.com/ng-web-apis/common/pull/6\n   */\n  cssRef, elementRef, userAgent, isIos) {\n    this.cssRef = cssRef;\n    this.elementRef = elementRef;\n    this.userAgent = userAgent;\n    this.isIos = isIos;\n    this.delegated = false;\n    this.isLegacy = !this.cssRef.supports('position', 'sticky') || isFirefox(this.userAgent) && !this.cssRef.supports('scrollbar-width', 'none');\n    this.hidden = false;\n    this.browserScrollRef = new ElementRef(this.elementRef.nativeElement);\n  }\n\n  get showScrollbars() {\n    return !this.hidden && !this.isIos && (!this.isLegacy || this.delegated);\n  }\n\n  get showNative() {\n    return this.isLegacy && !this.hidden && !this.delegated;\n  }\n\n  onScrollable(element) {\n    this.delegated = true;\n    this.browserScrollRef.nativeElement = element;\n  }\n\n  scrollIntoView(detail) {\n    if (this.delegated) {\n      return;\n    }\n\n    const {\n      nativeElement\n    } = this.browserScrollRef;\n    const {\n      offsetTop,\n      offsetLeft\n    } = getElementOffset(nativeElement, detail);\n    nativeElement.scrollTop = offsetTop + detail.offsetHeight / 2 - nativeElement.clientHeight / 2;\n    nativeElement.scrollLeft = offsetLeft + detail.offsetWidth / 2 - nativeElement.clientWidth / 2;\n  }\n\n};\n\nTuiScrollbarComponent.ɵfac = function TuiScrollbarComponent_Factory(t) {\n  return new (t || TuiScrollbarComponent)(ɵngcc0.ɵɵdirectiveInject(CSS), ɵngcc0.ɵɵdirectiveInject(ElementRef), ɵngcc0.ɵɵdirectiveInject(USER_AGENT), ɵngcc0.ɵɵdirectiveInject(TUI_IS_IOS));\n};\n\nTuiScrollbarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: TuiScrollbarComponent,\n  selectors: [[\"tui-scrollbar\"]],\n  hostVars: 2,\n  hostBindings: function TuiScrollbarComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"tui-scrollable.stop\", function TuiScrollbarComponent_tui_scrollable_stop_HostBindingHandler($event) {\n        return ctx.onScrollable($event.detail);\n      })(\"tui-scroll-into-view.stop\", function TuiScrollbarComponent_tui_scroll_into_view_stop_HostBindingHandler($event) {\n        return ctx.scrollIntoView($event.detail);\n      });\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵclassProp(\"_legacy\", ctx.showNative);\n    }\n  },\n  inputs: {\n    hidden: \"hidden\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: TUI_SCROLL_REF,\n    deps: [TuiScrollbarComponent_1],\n    useFactory: scrollRefFactory\n  }])],\n  ngContentSelectors: _c0,\n  decls: 3,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [1, \"content\"]],\n  template: function TuiScrollbarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵprojectionDef();\n      ɵngcc0.ɵɵtemplate(0, TuiScrollbarComponent_tui_scroll_controls_0_Template, 1, 0, \"tui-scroll-controls\", 0);\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n      ɵngcc0.ɵɵprojection(2);\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showScrollbars);\n    }\n  },\n  directives: [ɵngcc1.NgIf, ɵngcc2.TuiScrollControlsComponent],\n  styles: [\"[_nghost-%COMP%]{z-index:0;position:relative;display:flex;overflow:auto}[_nghost-%COMP%]:not(._legacy){scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%]:not(._legacy)::-webkit-scrollbar, [_nghost-%COMP%]:not(._legacy)::-webkit-scrollbar-thumb{background:0 0;width:0;height:0}._legacy[_nghost-%COMP%]{overflow:overlay}@media all and (-webkit-min-device-pixel-ratio:0) and (min-resolution:0.001dpcm){._legacy[_nghost-%COMP%]::-webkit-scrollbar, ._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb{width:1rem;height:1rem;border-radius:6.25rem;background-clip:padding-box;border:6px solid transparent}._legacy[_nghost-%COMP%]::-webkit-scrollbar{background-color:transparent}._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--tui-clear-hover)}._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--tui-clear-active)}._legacy[_nghost-%COMP%]::-webkit-scrollbar-thumb:active{background-color:var(--tui-text-03)}}.content[_ngcontent-%COMP%]{position:relative;z-index:0;flex:1;flex-basis:auto;width:100%;height:-webkit-max-content;height:-moz-max-content;height:max-content}\"],\n  changeDetection: 0\n});\n\nTuiScrollbarComponent.ctorParameters = () => [{\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [CSS]\n  }]\n}, {\n  type: ElementRef,\n  decorators: [{\n    type: Inject,\n    args: [ElementRef]\n  }]\n}, {\n  type: String,\n  decorators: [{\n    type: Inject,\n    args: [USER_AGENT]\n  }]\n}, {\n  type: Boolean,\n  decorators: [{\n    type: Inject,\n    args: [TUI_IS_IOS]\n  }]\n}];\n\n__decorate([Input(), tuiDefaultProp()], TuiScrollbarComponent.prototype, \"hidden\", void 0);\n\n__decorate([HostBinding('class._legacy')], TuiScrollbarComponent.prototype, \"showNative\", null);\n\n__decorate([HostListener(`${TUI_SCROLLABLE}.stop`, ['$event.detail'])], TuiScrollbarComponent.prototype, \"onScrollable\", null);\n\n__decorate([HostListener(`${TUI_SCROLL_INTO_VIEW}.stop`, ['$event.detail'])], TuiScrollbarComponent.prototype, \"scrollIntoView\", null);\n\nTuiScrollbarComponent = TuiScrollbarComponent_1 = __decorate([__param(0, Inject(CSS)), __param(1, Inject(ElementRef)), __param(2, Inject(USER_AGENT)), __param(3, Inject(TUI_IS_IOS))], TuiScrollbarComponent);\nlet TuiScrollbarModule = /*#__PURE__*/(() => {\n  let TuiScrollbarModule = class TuiScrollbarModule {};\n\n  TuiScrollbarModule.ɵfac = function TuiScrollbarModule_Factory(t) {\n    return new (t || TuiScrollbarModule)();\n  };\n\n  TuiScrollbarModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiScrollbarModule\n  });\n  TuiScrollbarModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiScrollControlsModule]]\n  });\n  return TuiScrollbarModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiScrollbarModule, {\n    declarations: function () {\n      return [TuiScrollbarComponent, TuiScrollRefDirective, TuiScrollableDirective];\n    },\n    imports: function () {\n      return [CommonModule, TuiScrollControlsModule];\n    },\n    exports: function () {\n      return [TuiScrollbarComponent, TuiScrollRefDirective, TuiScrollableDirective];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { SCROLL_REF_SELECTOR, TuiScrollRefDirective, TuiScrollableDirective, TuiScrollbarComponent, TuiScrollbarModule, scrollRefFactory }; //# sourceMappingURL=taiga-ui-core-components-scrollbar.js.map","map":null,"metadata":{},"sourceType":"module"}