{"ast":null,"code":"import { __decorate } from 'tslib';\nimport { EventEmitter, Input, Output, HostBinding, Component, ChangeDetectionStrategy, NgModule } from '@angular/core';\nimport { TuiMonth, TUI_FIRST_DAY, TUI_LAST_DAY, ALWAYS_FALSE_HANDLER, TuiMonthRange, TuiYear, inRange, tuiDefaultProp, TuiHoveredModule, TuiPressedModule, TuiRepeatTimesModule, TuiLetModule } from '@taiga-ui/cdk';\nimport { TuiScrollIntoViewModule } from '@taiga-ui/core/directives/scroll-into-view';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@taiga-ui/cdk';\nimport * as ɵngcc2 from '@taiga-ui/core/directives/scroll-into-view';\n\nfunction TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵlistener(\"tuiHoveredChange\", function TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template_div_tuiHoveredChange_0_listener($event) {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r7);\n      const item_r5 = restoredCtx.tuiLet;\n      const ctx_r6 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r6.onItemHovered($event, item_r5);\n    })(\"tuiPressedChange\", function TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template_div_tuiPressedChange_0_listener($event) {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r7);\n      const item_r5 = restoredCtx.tuiLet;\n      const ctx_r8 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r8.onItemPressed($event, item_r5);\n    })(\"click\", function TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template_div_click_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r7);\n      const item_r5 = restoredCtx.tuiLet;\n      const ctx_r9 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r9.onItemClick(item_r5);\n    });\n    ɵngcc0.ɵɵelementStart(1, \"div\", 5);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r5 = ctx.tuiLet;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵclassProp(\"t-cell_today\", ctx_r4.itemIsToday(item_r5))(\"t-cell_interval\", ctx_r4.itemIsInterval(item_r5));\n    ɵngcc0.ɵɵproperty(\"tuiScrollIntoView\", ctx_r4.scrollItemIntoView(item_r5));\n    ɵngcc0.ɵɵattribute(\"data-range\", ctx_r4.getItemRange(item_r5))(\"data-state\", ctx_r4.getItemState(item_r5));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(item_r5);\n  }\n}\n\nfunction TuiPrimitiveYearPickerComponent_div_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, TuiPrimitiveYearPickerComponent_div_0_ng_container_1_div_1_Template, 3, 8, \"div\", 3);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const colIndex_r3 = ctx.$implicit;\n    const rowIndex_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"tuiLet\", ctx_r2.getItem(rowIndex_r1, colIndex_r3));\n  }\n}\n\nfunction TuiPrimitiveYearPickerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵtemplate(1, TuiPrimitiveYearPickerComponent_div_0_ng_container_1_Template, 2, 1, \"ng-container\", 2);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"tuiRepeatTimesOf\", 4);\n  }\n}\n\nconst LIMIT = 100;\nconst ITEMS_IN_ROW = 4;\nlet TuiPrimitiveYearPickerComponent = /*#__PURE__*/(() => {\n  let TuiPrimitiveYearPickerComponent = class TuiPrimitiveYearPickerComponent {\n    constructor() {\n      this.hoveredItem = null;\n      this.pressedItem = null;\n      this.currentYear = TuiMonth.currentLocal().year;\n      this.value = null;\n      this.initialItem = TuiMonth.currentLocal();\n      this.min = TUI_FIRST_DAY;\n      this.max = TUI_LAST_DAY;\n      this.disabledItemHandler = ALWAYS_FALSE_HANDLER;\n      this.yearClick = new EventEmitter();\n    }\n\n    get isSingle() {\n      const {\n        value\n      } = this;\n      return !!value && this.isRange(value) && value.from.yearSame(value.to);\n    }\n\n    get rows() {\n      return Math.ceil((this.calculatedMax - this.calculatedMin) / ITEMS_IN_ROW);\n    }\n\n    get calculatedMin() {\n      const initial = this.initialItem.year - LIMIT;\n      return this.min.year > initial ? this.min.year : initial;\n    }\n\n    get calculatedMax() {\n      const initial = this.initialItem.year + LIMIT;\n      return this.max.year < initial ? this.max.year + 1 : initial;\n    }\n\n    isRange(item) {\n      return item instanceof TuiMonthRange;\n    }\n\n    scrollItemIntoView(item) {\n      return this.initialItem.year === item;\n    }\n\n    getItem(rowIndex, colIndex) {\n      return rowIndex * ITEMS_IN_ROW + colIndex + this.calculatedMin;\n    }\n\n    getItemState(item) {\n      const {\n        disabledItemHandler,\n        max,\n        pressedItem,\n        hoveredItem\n      } = this;\n\n      if (max.year < item || disabledItemHandler !== ALWAYS_FALSE_HANDLER && disabledItemHandler(item)) {\n        return \"disabled\"\n        /* Disabled */\n        ;\n      }\n\n      if (pressedItem === item) {\n        return \"pressed\"\n        /* Pressed */\n        ;\n      }\n\n      if (hoveredItem === item) {\n        return \"hovered\"\n        /* Hovered */\n        ;\n      }\n\n      return null;\n    }\n\n    getItemRange(item) {\n      const {\n        value,\n        hoveredItem\n      } = this;\n\n      if (value === null) {\n        return null;\n      }\n\n      if (value instanceof TuiYear) {\n        return value.year === item ? \"single\"\n        /* Single */\n        : null;\n      }\n\n      if (value.from.year === item && !value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem > value.from.year && value.from.year === item && value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem === item && hoveredItem < value.from.year && value.from.yearSame(value.to)) {\n        return \"start\"\n        /* Start */\n        ;\n      }\n\n      if (value.to.year === item && !value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem < value.from.year && value.from.year === item && value.from.yearSame(value.to) || hoveredItem !== null && hoveredItem === item && hoveredItem > value.from.year && value.from.yearSame(value.to)) {\n        return \"end\"\n        /* End */\n        ;\n      }\n\n      return value.from.yearSame(value.to) && value.from.year === item ? \"single\"\n      /* Single */\n      : null;\n    }\n\n    itemIsToday(item) {\n      return this.currentYear === item;\n    }\n\n    itemIsInterval(item) {\n      const {\n        value,\n        hoveredItem\n      } = this;\n\n      if (value === null || !this.isRange(value)) {\n        return false;\n      }\n\n      if (!value.from.yearSame(value.to)) {\n        return value.from.year <= item && value.to.year > item;\n      }\n\n      if (hoveredItem === null || value.from.year === hoveredItem) {\n        return false;\n      }\n\n      return inRange(item, Math.min(value.from.year, hoveredItem), Math.max(value.from.year, hoveredItem));\n    }\n\n    onItemHovered(hovered, item) {\n      this.updateHoveredItem(hovered, item);\n    }\n\n    onItemPressed(pressed, item) {\n      this.updatePressedItem(pressed, item);\n    }\n\n    onItemClick(item) {\n      this.yearClick.emit(new TuiYear(item));\n    }\n\n    updateHoveredItem(hovered, item) {\n      this.hoveredItem = hovered ? item : null;\n    }\n\n    updatePressedItem(pressed, item) {\n      this.pressedItem = pressed ? item : null;\n    }\n\n  };\n\n  TuiPrimitiveYearPickerComponent.ɵfac = function TuiPrimitiveYearPickerComponent_Factory(t) {\n    return new (t || TuiPrimitiveYearPickerComponent)();\n  };\n\n  TuiPrimitiveYearPickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TuiPrimitiveYearPickerComponent,\n    selectors: [[\"tui-primitive-year-picker\"]],\n    hostVars: 2,\n    hostBindings: function TuiPrimitiveYearPickerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"_single\", ctx.isSingle);\n      }\n    },\n    inputs: {\n      value: \"value\",\n      initialItem: \"initialItem\",\n      min: \"min\",\n      max: \"max\",\n      disabledItemHandler: \"disabledItemHandler\"\n    },\n    outputs: {\n      yearClick: \"yearClick\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"automation-id\", \"tui-primitive-year-picker__row\", \"class\", \"t-row\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"automation-id\", \"tui-primitive-year-picker__row\", 1, \"t-row\"], [4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"automation-id\", \"tui-primitive-year-picker__cell\", \"class\", \"t-cell\", 3, \"t-cell_today\", \"t-cell_interval\", \"tuiScrollIntoView\", \"tuiHoveredChange\", \"tuiPressedChange\", \"click\", 4, \"tuiLet\"], [\"automation-id\", \"tui-primitive-year-picker__cell\", 1, \"t-cell\", 3, \"tuiScrollIntoView\", \"tuiHoveredChange\", \"tuiPressedChange\", \"click\"], [1, \"t-item\"]],\n    template: function TuiPrimitiveYearPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, TuiPrimitiveYearPickerComponent_div_0_Template, 2, 1, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx.rows);\n      }\n    },\n    directives: [ɵngcc1.TuiRepeatTimesDirective, ɵngcc1.TuiLetDirective, ɵngcc2.TuiScrollIntoViewDirective, ɵngcc1.TuiHoveredDirective, ɵngcc1.TuiPressedDirective],\n    styles: [\"[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;justify-content:space-between;height:2.25rem;margin:.875rem 0}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after, .t-item[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background-color:var(--tui-text-02)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-base-02)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-secondary-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-3.9375rem}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background-color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-primary-text)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary)}.t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=hovered][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-hover)}.t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after, .t-cell[data-range][data-state=pressed][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{background-color:var(--tui-primary-active)}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.25rem}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translateX(1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.25rem}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translateX(-1.4375rem) scaleY(.6) scaleX(.4) rotate(45deg)}.t-cell[data-state=disabled][_ngcontent-%COMP%]{pointer-events:none}.t-cell[data-state=disabled][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[data-state=hovered][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-hover)}.t-cell[data-state=pressed][_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background-color:var(--tui-secondary-active)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}\"],\n    changeDetection: 0\n  });\n\n  __decorate([Input(), tuiDefaultProp()], TuiPrimitiveYearPickerComponent.prototype, \"value\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiPrimitiveYearPickerComponent.prototype, \"initialItem\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiPrimitiveYearPickerComponent.prototype, \"min\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiPrimitiveYearPickerComponent.prototype, \"max\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiPrimitiveYearPickerComponent.prototype, \"disabledItemHandler\", void 0);\n\n  __decorate([Output()], TuiPrimitiveYearPickerComponent.prototype, \"yearClick\", void 0);\n\n  __decorate([HostBinding('class._single')], TuiPrimitiveYearPickerComponent.prototype, \"isSingle\", null);\n\n  return TuiPrimitiveYearPickerComponent;\n})();\nlet TuiPrimitiveYearPickerModule = /*#__PURE__*/(() => {\n  let TuiPrimitiveYearPickerModule = class TuiPrimitiveYearPickerModule {};\n\n  TuiPrimitiveYearPickerModule.ɵfac = function TuiPrimitiveYearPickerModule_Factory(t) {\n    return new (t || TuiPrimitiveYearPickerModule)();\n  };\n\n  TuiPrimitiveYearPickerModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiPrimitiveYearPickerModule\n  });\n  TuiPrimitiveYearPickerModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[TuiHoveredModule, TuiPressedModule, TuiRepeatTimesModule, TuiLetModule, TuiScrollIntoViewModule]]\n  });\n  return TuiPrimitiveYearPickerModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiPrimitiveYearPickerModule, {\n    declarations: function () {\n      return [TuiPrimitiveYearPickerComponent];\n    },\n    imports: function () {\n      return [TuiHoveredModule, TuiPressedModule, TuiRepeatTimesModule, TuiLetModule, TuiScrollIntoViewModule];\n    },\n    exports: function () {\n      return [TuiPrimitiveYearPickerComponent];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { TuiPrimitiveYearPickerComponent, TuiPrimitiveYearPickerModule }; //# sourceMappingURL=taiga-ui-core-components-primitive-year-picker.js.map","map":null,"metadata":{},"sourceType":"module"}