{"ast":null,"code":"import { __decorate, __param } from 'tslib';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Optional, Self, Inject, ChangeDetectorRef, ElementRef, Component, ChangeDetectionStrategy, forwardRef, NgModule } from '@angular/core';\nimport { NgControl } from '@angular/forms';\nimport { isNativeFocusedIn, round, TUI_FOCUSABLE_ITEM_ACCESSOR, TuiRepeatTimesModule, TuiFocusableModule, TuiActiveZoneModule, TuiFocusVisibleModule } from '@taiga-ui/cdk';\nimport { AbstractTuiSlider, DOT_WIDTH } from '@taiga-ui/kit/abstract';\nimport { TUI_FLOATING_PRECISION } from '@taiga-ui/kit/constants';\nimport { TUI_FROM_TO_TEXTS } from '@taiga-ui/kit/tokens';\nimport { Observable } from 'rxjs';\nimport { TuiFormatNumberPipeModule } from '@taiga-ui/core';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@taiga-ui/cdk';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from '@taiga-ui/core';\nimport * as ɵngcc4 from '@angular/forms';\nimport * as ɵngcc5 from 'rxjs';\n\nfunction TuiRangeComponent_div_2_span_1_span_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"i18nPlural\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const segmentIndex_r4 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, ctx_r7.getSegmentLabel(segmentIndex_r4), ctx_r7.pluralizeMap), \" \");\n  }\n}\n\nfunction TuiRangeComponent_div_2_span_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 12);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"tuiFormatNumber\");\n    ɵngcc0.ɵɵtemplate(3, TuiRangeComponent_div_2_span_1_span_1_span_3_Template, 3, 4, \"span\", 13);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const fromToText_r6 = ctx.ngIf;\n    const segmentIndex_r4 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ctx_r5.getSegmentPrefix(segmentIndex_r4, fromToText_r6), \" \", ɵngcc0.ɵɵpipeBind1(2, 3, ctx_r5.getSegmentLabel(segmentIndex_r4)), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.pluralizeMap);\n  }\n}\n\nfunction TuiRangeComponent_div_2_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 10);\n    ɵngcc0.ɵɵtemplate(1, TuiRangeComponent_div_2_span_1_span_1_Template, 4, 5, \"span\", 11);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r3.fromToTexts$));\n  }\n}\n\nfunction TuiRangeComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(1, TuiRangeComponent_div_2_span_1_Template, 3, 3, \"span\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"tuiRepeatTimesOf\", ctx_r0.segments + 1);\n  }\n}\n\nvar TuiRangeComponent_1; // @dynamic\n\nlet TuiRangeComponent = TuiRangeComponent_1 = class TuiRangeComponent extends AbstractTuiSlider {\n  constructor(control, changeDetectorRef, documentRef, elementRef, fromToTexts$) {\n    super(control, changeDetectorRef, documentRef, fromToTexts$);\n    this.elementRef = elementRef;\n  }\n\n  get nativeFocusableElement() {\n    if (this.computedDisabled || !this.dotLeft || !this.dotRight) {\n      return null;\n    }\n\n    return this.isLeftFocusable ? this.dotLeft.nativeElement : this.dotRight.nativeElement;\n  }\n\n  get focused() {\n    return isNativeFocusedIn(this.elementRef.nativeElement);\n  }\n\n  get left() {\n    return 100 * this.getFractionFromValue(this.value[0]);\n  }\n\n  get right() {\n    return 100 - 100 * this.getFractionFromValue(this.value[1]);\n  }\n\n  getFallbackValue() {\n    return [0, 0];\n  }\n\n  processStep(increment, right) {\n    const fraction = this.getFractionFromValue(right ? this.value[1] : this.value[0]);\n    const step = this.computedStep;\n    const value = this.getValueFromFraction(increment ? fraction + step : fraction - step);\n    this.processValue(value, right);\n  }\n\n  processValue(value, right) {\n    const guardedValue = this.valueGuard(value);\n\n    if (right === true) {\n      this.updateEnd(guardedValue);\n    } else {\n      this.updateStart(guardedValue);\n    }\n  }\n\n  getCalibratedFractionFromEvents(rect, clientX, isMouseDownRight) {\n    const value = clientX - rect.left - DOT_WIDTH[this.size] / 2 - (isMouseDownRight ? DOT_WIDTH[this.size] : 0);\n    const total = rect.width - 2 * DOT_WIDTH[this.size];\n    return round(value / total, TUI_FLOATING_PRECISION);\n  }\n\n  updateStart(value) {\n    this.updateValue([Math.min(value, this.value[1]), this.value[1]]);\n  }\n\n  updateEnd(value) {\n    this.updateValue([this.value[0], Math.max(value, this.value[0])]);\n  }\n\n};\n\nTuiRangeComponent.ɵfac = function TuiRangeComponent_Factory(t) {\n  return new (t || TuiRangeComponent)(ɵngcc0.ɵɵdirectiveInject(NgControl, 10), ɵngcc0.ɵɵdirectiveInject(ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ElementRef), ɵngcc0.ɵɵdirectiveInject(TUI_FROM_TO_TEXTS));\n};\n\nTuiRangeComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: TuiRangeComponent,\n  selectors: [[\"tui-range\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n    useExisting: forwardRef(() => TuiRangeComponent_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 8,\n  vars: 11,\n  consts: [[1, \"event-catcher\", 3, \"tuiActiveZoneChange\", \"mousedown\", \"touchstart\"], [1, \"wrapper\"], [\"class\", \"segments\", 4, \"ngIf\"], [\"automation-id\", \"tui-slider__bar\", 1, \"bar\"], [\"automation-id\", \"tui-slider__left\", 1, \"dot\", 3, \"tuiFocusable\", \"tuiFocusVisibleChange\", \"keydown.arrowLeft.prevent\", \"keydown.arrowDown.prevent\", \"keydown.arrowRight.prevent\", \"keydown.arrowUp.prevent\"], [\"dotLeft\", \"\"], [\"automation-id\", \"tui-slider__right\", 1, \"dot\", 3, \"tuiFocusable\", \"tuiFocusVisibleChange\", \"keydown.arrowLeft.prevent\", \"keydown.arrowDown.prevent\", \"keydown.arrowRight.prevent\", \"keydown.arrowUp.prevent\"], [\"dotRight\", \"\"], [1, \"segments\"], [\"automation-id\", \"tui-slider__segment\", \"class\", \"segment\", 4, \"tuiRepeatTimes\", \"tuiRepeatTimesOf\"], [\"automation-id\", \"tui-slider__segment\", 1, \"segment\"], [\"class\", \"number\", 4, \"ngIf\"], [1, \"number\"], [4, \"ngIf\"]],\n  template: function TuiRangeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n      ɵngcc0.ɵɵlistener(\"tuiActiveZoneChange\", function TuiRangeComponent_Template_div_tuiActiveZoneChange_0_listener($event) {\n        return ctx.onActiveZone($event);\n      })(\"mousedown\", function TuiRangeComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.onMouseDown($event);\n      })(\"touchstart\", function TuiRangeComponent_Template_div_touchstart_0_listener($event) {\n        return ctx.onTouchStart($event);\n      });\n      ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n      ɵngcc0.ɵɵtemplate(2, TuiRangeComponent_div_2_Template, 2, 1, \"div\", 2);\n      ɵngcc0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4, 5);\n      ɵngcc0.ɵɵlistener(\"tuiFocusVisibleChange\", function TuiRangeComponent_Template_div_tuiFocusVisibleChange_4_listener($event) {\n        return ctx.onLeftFocusVisible($event);\n      })(\"keydown.arrowLeft.prevent\", function TuiRangeComponent_Template_div_keydown_arrowLeft_prevent_4_listener() {\n        return ctx.decrement(false);\n      })(\"keydown.arrowDown.prevent\", function TuiRangeComponent_Template_div_keydown_arrowDown_prevent_4_listener() {\n        return ctx.decrement(false);\n      })(\"keydown.arrowRight.prevent\", function TuiRangeComponent_Template_div_keydown_arrowRight_prevent_4_listener() {\n        return ctx.increment(false);\n      })(\"keydown.arrowUp.prevent\", function TuiRangeComponent_Template_div_keydown_arrowUp_prevent_4_listener() {\n        return ctx.increment(false);\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(6, \"div\", 6, 7);\n      ɵngcc0.ɵɵlistener(\"tuiFocusVisibleChange\", function TuiRangeComponent_Template_div_tuiFocusVisibleChange_6_listener($event) {\n        return ctx.onRightFocusVisible($event);\n      })(\"keydown.arrowLeft.prevent\", function TuiRangeComponent_Template_div_keydown_arrowLeft_prevent_6_listener() {\n        return ctx.decrement(true);\n      })(\"keydown.arrowDown.prevent\", function TuiRangeComponent_Template_div_keydown_arrowDown_prevent_6_listener() {\n        return ctx.decrement(true);\n      })(\"keydown.arrowRight.prevent\", function TuiRangeComponent_Template_div_keydown_arrowRight_prevent_6_listener() {\n        return ctx.increment(true);\n      })(\"keydown.arrowUp.prevent\", function TuiRangeComponent_Template_div_keydown_arrowUp_prevent_6_listener() {\n        return ctx.increment(true);\n      });\n      ɵngcc0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.segmented);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵstyleProp(\"left\", ctx.left, \"%\")(\"right\", ctx.right, \"%\");\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵclassProp(\"dot_focus-visible\", ctx.focusVisibleLeft && ctx.computedFocused);\n      ɵngcc0.ɵɵproperty(\"tuiFocusable\", ctx.isLeftFocusable);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵclassProp(\"dot_focus-visible\", ctx.focusVisibleRight && ctx.computedFocused);\n      ɵngcc0.ɵɵproperty(\"tuiFocusable\", ctx.isRightFocusable);\n    }\n  },\n  directives: [ɵngcc1.TuiActiveZoneDirective, ɵngcc2.NgIf, ɵngcc1.TuiRepeatTimesDirective, ɵngcc1.TuiFocusableDirective, ɵngcc1.TuiFocusVisibleDirective],\n  pipes: [ɵngcc2.AsyncPipe, ɵngcc3.TuiFormatNumberPipe, ɵngcc2.I18nPluralPipe],\n  styles: [\"[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);color:var(--tui-base-03);min-height:.125rem;font-size:1rem}[data-size='s'][_nghost-%COMP%]{min-height:.125rem;font-size:.5rem}._segmented[_nghost-%COMP%]{padding-bottom:1.25rem}._disabled[_nghost-%COMP%]{cursor:default;pointer-events:none;opacity:var(--tui-disabled-opacity)}.event-catcher[_ngcontent-%COMP%]{min-height:inherit;border-radius:inherit;padding:.4375rem 0;cursor:pointer}.wrapper[_ngcontent-%COMP%]{position:relative;min-height:inherit;border-radius:inherit;background-color:currentColor;border:solid transparent;border-width:0 1em}.bar[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;margin:0 -1em;border-radius:inherit;background-color:var(--tui-primary)}tui-input-slider[_nghost-%COMP%]   .bar[_ngcontent-%COMP%], tui-input-slider   [_nghost-%COMP%]   .bar[_ngcontent-%COMP%]{margin-left:calc(var(--tui-radius-m)/ 2);border-bottom-left-radius:calc(var(--tui-radius-m) * 5) calc(var(--tui-radius-m) * 1.5)}.dot[_ngcontent-%COMP%]{transition-property:background-color;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;position:absolute;top:50%;z-index:1;width:1em;height:1em;transform:translate(0,-50%);border-radius:100%;background-color:var(--tui-primary);outline:0;cursor:ew-resize}.dot[_ngcontent-%COMP%]:last-child{right:0;transform:translate(0,-50%)}.dot[_ngcontent-%COMP%]:hover{background-color:var(--tui-primary-hover)}.dot[_ngcontent-%COMP%]:active{background-color:var(--tui-primary-active)}.dot_focus-visible[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 2px var(--tui-focus)}.segments[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;justify-content:space-between;min-height:inherit;margin:0 -1em}.segments-spacer[_ngcontent-%COMP%]{height:1.625rem}.segment[_ngcontent-%COMP%]{position:relative;height:inherit;width:.25rem;background-color:rgba(0,0,0,.36);pointer-events:none}.segment[_ngcontent-%COMP%]:first-of-type, .segment[_ngcontent-%COMP%]:last-of-type{background-color:transparent}.number[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%,0);top:100%;font:var(--tui-font-text-s);margin-top:.5rem;color:var(--tui-text-02);white-space:nowrap}.segment[_ngcontent-%COMP%]:first-of-type   .number[_ngcontent-%COMP%]{left:-.05em;transform:none}.segment[_ngcontent-%COMP%]:last-of-type   .number[_ngcontent-%COMP%]{left:auto;right:-.05em;transform:none}._disabled[_nghost-%COMP%]   .number[_ngcontent-%COMP%]{color:var(--tui-text-01)}\"],\n  changeDetection: 0\n});\n\nTuiRangeComponent.ctorParameters = () => [{\n  type: NgControl,\n  decorators: [{\n    type: Optional\n  }, {\n    type: Self\n  }, {\n    type: Inject,\n    args: [NgControl]\n  }]\n}, {\n  type: ChangeDetectorRef,\n  decorators: [{\n    type: Inject,\n    args: [ChangeDetectorRef]\n  }]\n}, {\n  type: Document,\n  decorators: [{\n    type: Inject,\n    args: [DOCUMENT]\n  }]\n}, {\n  type: ElementRef,\n  decorators: [{\n    type: Inject,\n    args: [ElementRef]\n  }]\n}, {\n  type: Observable,\n  decorators: [{\n    type: Inject,\n    args: [TUI_FROM_TO_TEXTS]\n  }]\n}];\n\nTuiRangeComponent = TuiRangeComponent_1 = __decorate([__param(0, Optional()), __param(0, Self()), __param(0, Inject(NgControl)), __param(1, Inject(ChangeDetectorRef)), __param(2, Inject(DOCUMENT)), __param(3, Inject(ElementRef)), __param(4, Inject(TUI_FROM_TO_TEXTS))], TuiRangeComponent);\nlet TuiRangeModule = /*#__PURE__*/(() => {\n  let TuiRangeModule = class TuiRangeModule {};\n\n  TuiRangeModule.ɵfac = function TuiRangeModule_Factory(t) {\n    return new (t || TuiRangeModule)();\n  };\n\n  TuiRangeModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiRangeModule\n  });\n  TuiRangeModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiRepeatTimesModule, TuiFocusableModule, TuiActiveZoneModule, TuiFocusVisibleModule, TuiFormatNumberPipeModule]]\n  });\n  return TuiRangeModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiRangeModule, {\n    declarations: function () {\n      return [TuiRangeComponent];\n    },\n    imports: function () {\n      return [CommonModule, TuiRepeatTimesModule, TuiFocusableModule, TuiActiveZoneModule, TuiFocusVisibleModule, TuiFormatNumberPipeModule];\n    },\n    exports: function () {\n      return [TuiRangeComponent];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { TuiRangeComponent, TuiRangeModule }; //# sourceMappingURL=taiga-ui-kit-components-range.js.map","map":null,"metadata":{},"sourceType":"module"}