{"ast":null,"code":"import { EventEmitter } from \"@angular/core\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport { FormBaseViewModel } from \"src/libraries/form-base-view-model\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.base.service\";\nimport * as i2 from \"src/app/services/global-notification.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@taiga-ui/kit\";\nimport * as i5 from \"@taiga-ui/core\";\nimport * as i6 from \"@taiga-ui/core/components/button\";\nexport let RegistrationComponent = /*#__PURE__*/(() => {\n  class RegistrationComponent extends FormBaseViewModel {\n    constructor(_userBaseService, _notificationService) {\n      super();\n      this._userBaseService = _userBaseService;\n      this._notificationService = _notificationService;\n      this.onRegistration = new EventEmitter();\n      this._onDestroy$ = new Subject();\n    }\n\n    ngOnDestroy() {\n      this._onDestroy$.next();\n    }\n\n    submitForm() {\n      const data = {\n        firstName: this.getFormValue('username').split(' ')[1],\n        lastName: this.getFormValue('username').split(' ')[0],\n        patronymic: this.getFormValue('username').split(' ')[2],\n        password: this.getFormValue('password'),\n        email: this.getFormValue('email'),\n        phoneNumber: this.getFormValue('contacts'),\n        university: this.getFormValue('universityName'),\n        institute: this.getFormValue('faculty'),\n        subject: this.getFormValue('subject'),\n        socialNetwork: this.getFormValue('socialNetworkLink')\n      };\n\n      this._userBaseService.registerTeacher(data).pipe(takeUntil(this._onDestroy$)).subscribe({\n        next: () => {\n          this._notificationService.subject$.next({\n            text: 'Регистрация успешна',\n            status: 'success'\n          });\n\n          this.onRegistration.emit();\n        },\n        error: () => {\n          this._notificationService.subject$.next({\n            text: 'Ошибка при регистрации',\n            status: 'error'\n          });\n        }\n      });\n    }\n\n    getControls() {\n      return new FormGroup({\n        username: new FormControl('', [Validators.required]),\n        universityName: new FormControl('', [Validators.required]),\n        faculty: new FormControl('', [Validators.required]),\n        subject: new FormControl('', [Validators.required]),\n        email: new FormControl('', [Validators.required]),\n        password: new FormControl('', [Validators.required]),\n        repeatPassword: new FormControl('', [Validators.required]),\n        socialNetworkLink: new FormControl('', [Validators.required]),\n        contacts: new FormControl('', [Validators.required])\n      });\n    }\n\n  }\n\n  RegistrationComponent.ɵfac = function RegistrationComponent_Factory(t) {\n    return new (t || RegistrationComponent)(i0.ɵɵdirectiveInject(i1.UserBaseService), i0.ɵɵdirectiveInject(i2.GlobalNotificationService));\n  };\n\n  RegistrationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegistrationComponent,\n    selectors: [[\"registration-component\"]],\n    outputs: {\n      onRegistration: \"onRegistration\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 41,\n    vars: 2,\n    consts: [[1, \"wrapper\"], [1, \"b-form\", 3, \"formGroup\"], [\"formControlName\", \"username\", 1, \"b-form__username_field\"], [\"tuiTextfield\", \"\", \"placeholder\", \"\", \"type\", \"text\"], [\"formControlName\", \"universityName\", 1, \"b-form__university_field\"], [\"formControlName\", \"faculty\", 1, \"b-form__faculty_field\"], [\"formControlName\", \"subject\", 1, \"b-form__group_field\"], [\"formControlName\", \"email\", 1, \"b-form__email_field\"], [\"tuiTextfield\", \"\", \"placeholder\", \"\", \"type\", \"email\"], [\"formControlName\", \"password\", 1, \"b-form__password_field\"], [\"tuiTextfield\", \"\", \"placeholder\", \"\", \"type\", \"password\"], [\"formControlName\", \"repeatPassword\", 1, \"b-form__password_field\"], [\"formControlName\", \"socialNetworkLink\", 1, \"b-form__socials_field\"], [\"formControlName\", \"contacts\", 1, \"b-form__contacts_field\"], [\"tuiButton\", \"\", \"type\", \"submit\", \"appearance\", \"accent\", 1, \"b-form__button_login\", 3, \"disabled\", \"click\"]],\n    template: function RegistrationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"div\")(3, \"tui-input\", 2);\n        i0.ɵɵtext(4, \" \\u0424\\u0418\\u041E \");\n        i0.ɵɵelement(5, \"input\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\")(7, \"tui-input\", 4);\n        i0.ɵɵtext(8, \" \\u0423\\u0447\\u0435\\u0431\\u043D\\u043E\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u0435 \");\n        i0.ɵɵelement(9, \"input\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\")(11, \"tui-input\", 5);\n        i0.ɵɵtext(12, \" \\u041D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \");\n        i0.ɵɵelement(13, \"input\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\")(15, \"tui-input\", 6);\n        i0.ɵɵtext(16, \" \\u041F\\u0440\\u0435\\u0434\\u043C\\u0435\\u0442 \");\n        i0.ɵɵelement(17, \"input\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\")(19, \"tui-input\", 7);\n        i0.ɵɵtext(20, \" \\u0410\\u0434\\u0440\\u0435\\u0441 \\u044D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u043E\\u0439 \\u043F\\u043E\\u0447\\u0442\\u044B \");\n        i0.ɵɵelement(21, \"input\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\")(23, \"tui-input\", 9);\n        i0.ɵɵtext(24, \" \\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \");\n        i0.ɵɵelement(25, \"input\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\")(27, \"tui-input\", 11);\n        i0.ɵɵtext(28, \" \\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \");\n        i0.ɵɵelement(29, \"input\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"div\")(31, \"tui-input\", 12);\n        i0.ɵɵtext(32, \" \\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0441\\u043E\\u0446\\u0441\\u0435\\u0442\\u044C \");\n        i0.ɵɵelement(33, \"input\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(34, \"div\")(35, \"tui-input\", 13);\n        i0.ɵɵtext(36, \" \\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442 \\u0434\\u043B\\u044F \\u0441\\u0432\\u044F\\u0437\\u0438 \");\n        i0.ɵɵelement(37, \"input\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(38, \"div\")(39, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function RegistrationComponent_Template_button_click_39_listener() {\n          return ctx.submitForm();\n        });\n        i0.ɵɵtext(40, \" \\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F \");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.controlsGroup);\n        i0.ɵɵadvance(38);\n        i0.ɵɵproperty(\"disabled\", !ctx.controlsGroup.valid);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i4.TuiInputComponent, i4.TuiInputDirective, i3.NgControlStatus, i3.FormControlName, i5.TuiTextfieldComponent, i6.TuiButtonComponent],\n    styles: [\".wrapper[_ngcontent-%COMP%]{margin-top:109px}.b-form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:18px}.b-form__socials_field[_ngcontent-%COMP%], .b-form__password_field[_ngcontent-%COMP%], .b-form__group_field[_ngcontent-%COMP%], .b-form__faculty_field[_ngcontent-%COMP%], .b-form__university_field[_ngcontent-%COMP%], .b-form__username_field[_ngcontent-%COMP%], .b-form__contacts_field[_ngcontent-%COMP%], .b-form__email_field[_ngcontent-%COMP%]{border-radius:0}.b-form__button_login[_ngcontent-%COMP%]{border-radius:0;width:100%;margin-top:72px;background:#FE7451}\"],\n    changeDetection: 0\n  });\n  return RegistrationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}