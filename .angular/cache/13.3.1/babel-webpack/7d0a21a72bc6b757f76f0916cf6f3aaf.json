{"ast":null,"code":"import { __decorate, __param } from 'tslib';\nimport { forwardRef, InjectionToken, Optional, Self, Inject, ChangeDetectorRef, ViewChild, Input, ContentChild, TemplateRef, Component, ChangeDetectionStrategy, Directive, NgModule } from '@angular/core';\nimport { NgControl } from '@angular/forms';\nimport { AbstractTuiControl, TUI_FOCUSABLE_ITEM_ACCESSOR, AbstractTuiNullableControl, isNativeFocused, setNativeFocused, tuiDefaultProp, tuiPure, TuiActiveZoneModule } from '@taiga-ui/cdk';\nimport { TUI_DATA_LIST_HOST, TUI_OPTION_CONTENT, TuiTextfieldCleanerDirective, TUI_TEXTFIELD_CLEANER, TuiPrimitiveTextfieldComponent, TuiHostedDropdownComponent, TuiDataListDirective, TuiAbstractTextfieldHost, TUI_TEXTFIELD_HOST, TuiPrimitiveTextfieldModule, TuiHostedDropdownModule, TuiTextfieldComponent } from '@taiga-ui/core';\nimport { TUI_ARROW_MODE, TuiArrowModule } from '@taiga-ui/kit/components/arrow';\nimport { TUI_ITEMS_HANDLERS } from '@taiga-ui/kit/tokens';\nimport { TUI_SELECT_OPTION, TuiSelectOptionModule } from '@taiga-ui/kit/components/select-option';\nimport { FIXED_DROPDOWN_CONTROLLER_PROVIDER } from '@taiga-ui/kit/providers';\nimport { CommonModule } from '@angular/common';\nimport { PolymorpheusModule } from '@tinkoff/ng-polymorpheus'; // TODO: remove in ivy compilation\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@taiga-ui/core';\nimport * as ɵngcc2 from '@taiga-ui/cdk';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@tinkoff/ng-polymorpheus';\nimport * as ɵngcc5 from '@angular/forms';\n\nfunction TuiSelectComponent_div_4_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const primitiveValue_r2 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(primitiveValue_r2);\n  }\n}\n\nfunction TuiSelectComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵtemplate(1, TuiSelectComponent_div_4_ng_template_1_Template, 2, 1, \"ng-template\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"content\", ctx_r0.computedContent)(\"context\", ctx_r0.computeContext(ctx_r0.value, ctx_r0.computedFocused));\n  }\n}\n\nconst _c0 = [\"*\", [[\"input\"]]];\nconst _c1 = [\"*\", \"input\"];\nconst SELECT_OPTION = TUI_SELECT_OPTION;\nconst TUI_SELECT_PROVIDERS = [{\n  provide: AbstractTuiControl,\n  useExisting: forwardRef(() => TuiSelectComponent)\n}, {\n  provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n  useExisting: forwardRef(() => TuiSelectComponent)\n}, {\n  provide: TUI_DATA_LIST_HOST,\n  useExisting: forwardRef(() => TuiSelectComponent)\n}, {\n  provide: TUI_OPTION_CONTENT,\n  useValue: SELECT_OPTION\n}, FIXED_DROPDOWN_CONTROLLER_PROVIDER];\nconst TUI_SELECT_DEFAULT_OPTIONS = {\n  valueContent: ''\n};\nconst TUI_SELECT_OPTIONS = new InjectionToken('Default parameters for select component', {\n  factory: () => TUI_SELECT_DEFAULT_OPTIONS\n});\n\nconst tuiSelectOptionsProvider = options => ({\n  provide: TUI_SELECT_OPTIONS,\n  useValue: Object.assign(Object.assign({}, TUI_SELECT_DEFAULT_OPTIONS), options)\n});\n\nlet TuiSelectComponent = /*#__PURE__*/(() => {\n  let TuiSelectComponent = class TuiSelectComponent extends AbstractTuiNullableControl {\n    constructor(control, changeDetectorRef, textfieldCleaner, arrowMode, itemsHandlers, options) {\n      super(control, changeDetectorRef);\n      this.textfieldCleaner = textfieldCleaner;\n      this.arrowMode = arrowMode;\n      this.itemsHandlers = itemsHandlers;\n      this.options = options;\n      this.stringify = this.itemsHandlers.stringify;\n      this.identityMatcher = this.itemsHandlers.identityMatcher;\n      this.valueContent = this.options.valueContent;\n      this.datalist = '';\n    }\n\n    get arrow() {\n      return !this.interactive ? this.arrowMode.disabled : this.arrowMode.interactive;\n    }\n\n    get nativeFocusableElement() {\n      return this.textfield ? this.textfield.nativeFocusableElement : null;\n    }\n\n    get focused() {\n      return isNativeFocused(this.nativeFocusableElement) || !!this.hostedDropdown && this.hostedDropdown.focused;\n    }\n\n    get computedValue() {\n      return this.value === null ? '' : this.stringify(this.value) || ' ';\n    }\n\n    get computedContent() {\n      return this.valueContent || this.computedValue;\n    }\n\n    computeContext($implicit, active) {\n      return {\n        $implicit,\n        active\n      };\n    }\n\n    onValueChange(value) {\n      if (!value) {\n        this.updateValue(null);\n      }\n    }\n\n    onActiveZone(active) {\n      this.updateFocused(active);\n    }\n\n    onHovered(hovered) {\n      this.updateHovered(hovered);\n    }\n\n    onKeyDownDelete() {\n      if (this.textfieldCleaner.cleaner) {\n        this.updateValue(null);\n      }\n    }\n\n    handleOption(option) {\n      var _a;\n\n      this.focusInput();\n      this.updateValue(option);\n      (_a = this.hostedDropdown) === null || _a === void 0 ? void 0 : _a.updateOpen(false);\n    }\n\n    focusInput(preventScroll = false) {\n      if (this.nativeFocusableElement) {\n        setNativeFocused(this.nativeFocusableElement, true, preventScroll);\n      }\n    }\n\n  };\n\n  TuiSelectComponent.ɵfac = function TuiSelectComponent_Factory(t) {\n    return new (t || TuiSelectComponent)(ɵngcc0.ɵɵdirectiveInject(NgControl, 10), ɵngcc0.ɵɵdirectiveInject(ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(TUI_TEXTFIELD_CLEANER), ɵngcc0.ɵɵdirectiveInject(TUI_ARROW_MODE), ɵngcc0.ɵɵdirectiveInject(TUI_ITEMS_HANDLERS), ɵngcc0.ɵɵdirectiveInject(TUI_SELECT_OPTIONS));\n  };\n\n  TuiSelectComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TuiSelectComponent,\n    selectors: [[\"tui-select\"]],\n    contentQueries: function TuiSelectComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, TuiDataListDirective, 5, TemplateRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.datalist = _t.first);\n      }\n    },\n    viewQuery: function TuiSelectComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(TuiPrimitiveTextfieldComponent, 5);\n        ɵngcc0.ɵɵviewQuery(TuiHostedDropdownComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.textfield = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.hostedDropdown = _t.first);\n      }\n    },\n    inputs: {\n      stringify: \"stringify\",\n      identityMatcher: \"identityMatcher\",\n      valueContent: \"valueContent\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature(TUI_SELECT_PROVIDERS), ɵngcc0.ɵɵInheritDefinitionFeature],\n    ngContentSelectors: _c1,\n    decls: 5,\n    vars: 14,\n    consts: [[1, \"t-hosted\", 3, \"canOpen\", \"content\", \"tuiActiveZoneChange\"], [\"automation-id\", \"tui-select__textfield\", 1, \"t-textfield\", 3, \"editable\", \"pseudoFocused\", \"pseudoHovered\", \"pseudoPressed\", \"invalid\", \"nativeId\", \"readOnly\", \"iconContent\", \"disabled\", \"focusable\", \"value\", \"valueChange\", \"hoveredChange\", \"keydown.delete.prevent\", \"keydown.backspace.prevent\"], [\"polymorpheus-outlet\", \"\", \"automation-id\", \"tui-select__value\", \"class\", \"t-value\", 3, \"content\", \"context\", 4, \"ngIf\"], [\"polymorpheus-outlet\", \"\", \"automation-id\", \"tui-select__value\", 1, \"t-value\", 3, \"content\", \"context\"], [1, \"t-primitive-value\"]],\n    template: function TuiSelectComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c0);\n        ɵngcc0.ɵɵelementStart(0, \"tui-hosted-dropdown\", 0);\n        ɵngcc0.ɵɵlistener(\"tuiActiveZoneChange\", function TuiSelectComponent_Template_tui_hosted_dropdown_tuiActiveZoneChange_0_listener($event) {\n          return ctx.onActiveZone($event);\n        });\n        ɵngcc0.ɵɵelementStart(1, \"tui-primitive-textfield\", 1);\n        ɵngcc0.ɵɵlistener(\"valueChange\", function TuiSelectComponent_Template_tui_primitive_textfield_valueChange_1_listener($event) {\n          return ctx.onValueChange($event);\n        })(\"hoveredChange\", function TuiSelectComponent_Template_tui_primitive_textfield_hoveredChange_1_listener($event) {\n          return ctx.onHovered($event);\n        })(\"keydown.delete.prevent\", function TuiSelectComponent_Template_tui_primitive_textfield_keydown_delete_prevent_1_listener() {\n          return ctx.onKeyDownDelete();\n        })(\"keydown.backspace.prevent\", function TuiSelectComponent_Template_tui_primitive_textfield_keydown_backspace_prevent_1_listener() {\n          return ctx.onKeyDownDelete();\n        });\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵprojection(3, 1, [\"ngProjectAs\", \"input\", 5, [\"input\"]]);\n        ɵngcc0.ɵɵtemplate(4, TuiSelectComponent_div_4_Template, 2, 2, \"div\", 2);\n        ɵngcc0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"canOpen\", ctx.interactive)(\"content\", ctx.datalist || \"\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"editable\", false)(\"pseudoFocused\", ctx.computedFocused)(\"pseudoHovered\", ctx.pseudoHovered)(\"pseudoPressed\", ctx.pseudoPressed)(\"invalid\", ctx.computedInvalid)(\"nativeId\", ctx.nativeId)(\"readOnly\", ctx.readOnly)(\"iconContent\", ctx.arrow)(\"disabled\", ctx.computedDisabled)(\"focusable\", ctx.computedFocusable)(\"value\", ctx.computedValue);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.value !== null);\n      }\n    },\n    directives: [ɵngcc1.TuiHostedDropdownComponent, ɵngcc2.TuiActiveZoneDirective, ɵngcc1.TuiPrimitiveTextfieldComponent, ɵngcc1.TuiPrimitiveTextfieldDirective, ɵngcc3.NgIf, ɵngcc4.PolymorpheusOutletComponent],\n    styles: [\"[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}[_nghost-%COMP%]:not(._readonly)     input:not(:disabled){cursor:pointer}._readonly[_nghost-%COMP%]     input{cursor:default}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.t-primitive-value[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\"],\n    changeDetection: 0\n  });\n\n  __decorate([ViewChild(TuiPrimitiveTextfieldComponent)], TuiSelectComponent.prototype, \"textfield\", void 0);\n\n  __decorate([ViewChild(TuiHostedDropdownComponent)], TuiSelectComponent.prototype, \"hostedDropdown\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiSelectComponent.prototype, \"stringify\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiSelectComponent.prototype, \"identityMatcher\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiSelectComponent.prototype, \"valueContent\", void 0);\n\n  __decorate([ContentChild(TuiDataListDirective, {\n    read: TemplateRef\n  })], TuiSelectComponent.prototype, \"datalist\", void 0);\n\n  __decorate([tuiPure], TuiSelectComponent.prototype, \"computeContext\", null);\n\n  TuiSelectComponent = __decorate([__param(0, Optional()), __param(0, Self()), __param(0, Inject(NgControl)), __param(1, Inject(ChangeDetectorRef)), __param(2, Inject(TUI_TEXTFIELD_CLEANER)), __param(3, Inject(TUI_ARROW_MODE)), __param(4, Inject(TUI_ITEMS_HANDLERS)), __param(5, Inject(TUI_SELECT_OPTIONS))], TuiSelectComponent);\n  return TuiSelectComponent;\n})();\nvar TuiSelectDirective_1;\nlet TuiSelectDirective = TuiSelectDirective_1 = class TuiSelectDirective extends TuiAbstractTextfieldHost {\n  get readOnly() {\n    return true;\n  }\n\n  get value() {\n    return this.host.computedValue;\n  }\n\n  onValueChange(value) {\n    this.host.onValueChange(value);\n  }\n\n};\n\nTuiSelectDirective.ɵfac = /*@__PURE__*/function () {\n  let ɵTuiSelectDirective_BaseFactory;\n  return function TuiSelectDirective_Factory(t) {\n    return (ɵTuiSelectDirective_BaseFactory || (ɵTuiSelectDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TuiSelectDirective)))(t || TuiSelectDirective);\n  };\n}();\n\nTuiSelectDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: TuiSelectDirective,\n  selectors: [[\"tui-select\"]],\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: TUI_TEXTFIELD_HOST,\n    useExisting: forwardRef(() => TuiSelectDirective_1)\n  }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n});\nlet TuiSelectModule = /*#__PURE__*/(() => {\n  let TuiSelectModule = class TuiSelectModule {};\n\n  TuiSelectModule.ɵfac = function TuiSelectModule_Factory(t) {\n    return new (t || TuiSelectModule)();\n  };\n\n  TuiSelectModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiSelectModule\n  });\n  TuiSelectModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, PolymorpheusModule, TuiActiveZoneModule, TuiPrimitiveTextfieldModule, TuiHostedDropdownModule, TuiSelectOptionModule, TuiArrowModule]]\n  });\n  return TuiSelectModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiSelectModule, {\n    declarations: function () {\n      return [TuiSelectComponent, TuiSelectDirective];\n    },\n    imports: function () {\n      return [CommonModule, PolymorpheusModule, TuiActiveZoneModule, TuiPrimitiveTextfieldModule, TuiHostedDropdownModule, TuiSelectOptionModule, TuiArrowModule];\n    },\n    exports: function () {\n      return [TuiSelectComponent, TuiSelectDirective, TuiTextfieldComponent];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { SELECT_OPTION, TUI_SELECT_DEFAULT_OPTIONS, TUI_SELECT_OPTIONS, TUI_SELECT_PROVIDERS, TuiSelectComponent, TuiSelectDirective, TuiSelectModule, tuiSelectOptionsProvider }; //# sourceMappingURL=taiga-ui-kit-components-select.js.map","map":null,"metadata":{},"sourceType":"module"}