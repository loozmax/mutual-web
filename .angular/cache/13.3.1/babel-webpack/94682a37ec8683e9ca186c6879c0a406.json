{"ast":null,"code":"import { __decorate, __param } from 'tslib';\nimport { Inject, ContentChildren, TemplateRef, Input, Component, ChangeDetectionStrategy, ViewEncapsulation, EventEmitter, Output, HostBinding, NgModule } from '@angular/core';\nimport { TuiItemDirective, tuiDefaultProp, TUI_IS_MOBILE, tuiPure, TuiFocusVisibleModule, TuiItemModule } from '@taiga-ui/cdk';\nimport { TUI_HIDE_TEXT, TUI_SHOW_ALL_TEXT, TUI_FILE_TEXTS, TUI_DIGITAL_INFORMATION_UNITS } from '@taiga-ui/kit/tokens';\nimport { Observable, of } from 'rxjs';\nimport { CommonModule } from '@angular/common';\nimport { TuiGroupModule, TuiLoaderModule, TuiSvgModule, TuiButtonModule, TuiExpandModule } from '@taiga-ui/core';\nimport { PolymorpheusModule } from '@tinkoff/ng-polymorpheus';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { formatSize } from '@taiga-ui/kit/utils/files';\nimport { map } from 'rxjs/operators';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nimport * as ɵngcc2 from '@taiga-ui/core';\nimport * as ɵngcc3 from 'rxjs';\nimport * as ɵngcc4 from '@taiga-ui/cdk';\nimport * as ɵngcc5 from '@tinkoff/ng-polymorpheus';\nimport * as ɵngcc6 from '@angular/platform-browser';\n\nfunction TuiFilesComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nfunction TuiFilesComponent_ng_container_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0, 6);\n  }\n\n  if (rf & 2) {\n    const item_r4 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", item_r4);\n  }\n}\n\nfunction TuiFilesComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, TuiFilesComponent_ng_container_4_ng_container_1_Template, 1, 1, \"ng-container\", 5);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const index_r5 = ctx.index;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.max || index_r5 < ctx_r1.max);\n  }\n}\n\nfunction TuiFilesComponent_tui_expand_5_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0, 6);\n  }\n\n  if (rf & 2) {\n    const item_r9 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", item_r9);\n  }\n}\n\nfunction TuiFilesComponent_tui_expand_5_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, TuiFilesComponent_tui_expand_5_ng_container_2_ng_container_1_Template, 1, 1, \"ng-container\", 5);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const index_r10 = ctx.index;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.max && index_r10 >= ctx_r8.max);\n  }\n}\n\nfunction TuiFilesComponent_tui_expand_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tui-expand\", 7)(1, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(2, TuiFilesComponent_tui_expand_5_ng_container_2_Template, 2, 1, \"ng-container\", 2);\n    ɵngcc0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"expanded\", !ctx_r2.hidden);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r2.items);\n  }\n}\n\nfunction TuiFilesComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function TuiFilesComponent_button_6_Template_button_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r14);\n      const ctx_r13 = ɵngcc0.ɵɵnextContext();\n      return ctx_r13.toggle();\n    });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"t-button_collapsed\", ctx_r3.hidden);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 3, ctx_r3.hidden ? ctx_r3.showAllText$ : ctx_r3.hideText$), \" \");\n  }\n}\n\nconst _c0 = [\"*\"];\n\nfunction TuiFileComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0, 4);\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵnextContext();\n\n    const _r3 = ɵngcc0.ɵɵreference(4);\n\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\n\nfunction TuiFileComponent_ng_template_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nfunction TuiFileComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 5);\n    ɵngcc0.ɵɵlistener(\"tuiFocusVisibleChange\", function TuiFileComponent_ng_template_1_Template_a_tuiFocusVisibleChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.onFocusVisible($event);\n    });\n    ɵngcc0.ɵɵtemplate(1, TuiFileComponent_ng_template_1_ng_container_1_Template, 1, 0, \"ng-container\", 6);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n\n    const _r3 = ɵngcc0.ɵɵreference(4);\n\n    ɵngcc0.ɵɵproperty(\"href\", ctx_r2.src, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\n\nfunction TuiFileComponent_ng_template_3_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 15);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const fileSize_r13 = ctx.ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", fileSize_r13, \" \");\n  }\n}\n\nfunction TuiFileComponent_ng_template_3_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 16);\n  }\n\n  if (rf & 2) {\n    const content_r14 = ctx.ngIf;\n    ɵngcc0.ɵɵproperty(\"content\", content_r14);\n  }\n}\n\nfunction TuiFileComponent_ng_template_3_ng_container_12_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"button\", 18);\n    ɵngcc0.ɵɵlistener(\"click.prevent\", function TuiFileComponent_ng_template_3_ng_container_12_button_1_Template_button_click_prevent_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r18);\n      const ctx_r17 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r17.onRemoveClick();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const texts_r16 = ctx.ngIf;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵclassProp(\"t-remove_mobile\", ctx_r15.isMobile);\n    ɵngcc0.ɵɵproperty(\"title\", texts_r16.remove);\n  }\n}\n\nfunction TuiFileComponent_ng_template_3_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, TuiFileComponent_ng_template_3_ng_container_12_button_1_Template, 1, 3, \"button\", 17);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r12.fileTexts$));\n  }\n}\n\nfunction TuiFileComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8)(2, \"div\", 9)(3, \"div\", 10);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"div\", 11);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(7, TuiFileComponent_ng_template_3_div_7_Template, 2, 1, \"div\", 12);\n    ɵngcc0.ɵɵpipe(8, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(9, TuiFileComponent_ng_template_3_div_9_Template, 1, 1, \"div\", 13);\n    ɵngcc0.ɵɵpipe(10, \"async\");\n    ɵngcc0.ɵɵprojection(11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(12, TuiFileComponent_ng_template_3_ng_container_12_Template, 3, 3, \"ng-container\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n\n    const _r5 = ɵngcc0.ɵɵreference(6);\n\n    ɵngcc0.ɵɵclassProp(\"t-preview_big\", ctx_r4.isBig);\n    ɵngcc0.ɵɵproperty(\"content\", ctx_r4.leftContent || _r5);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r4.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r4.type);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.showSize && ɵngcc0.ɵɵpipeBind1(8, 8, ctx_r4.fileSize$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(10, 10, ctx_r4.content$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.allowDelete);\n  }\n}\n\nfunction TuiFileComponent_ng_template_5_img_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 22);\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r19.preview, ɵngcc0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction TuiFileComponent_ng_template_5_ng_template_1_tui_loader_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"tui-loader\", 24);\n  }\n\n  if (rf & 2) {\n    const ctx_r24 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"inheritColor\", ctx_r24.isBig);\n  }\n}\n\nfunction TuiFileComponent_ng_template_5_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TuiFileComponent_ng_template_5_ng_template_1_tui_loader_0_Template, 1, 1, \"tui-loader\", 23);\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵnextContext();\n\n    const _r22 = ɵngcc0.ɵɵreference(4);\n\n    const ctx_r21 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r21.isLoading)(\"ngIfElse\", _r22);\n  }\n}\n\nfunction TuiFileComponent_ng_template_5_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"tui-svg\", 25);\n  }\n\n  if (rf & 2) {\n    const ctx_r23 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵclassProp(\"t-icon_deleted\", ctx_r23.isDeleted)(\"t-icon_error\", ctx_r23.isError);\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r23.icon);\n  }\n}\n\nfunction TuiFileComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TuiFileComponent_ng_template_5_img_0_Template, 1, 1, \"img\", 19);\n    ɵngcc0.ɵɵtemplate(1, TuiFileComponent_ng_template_5_ng_template_1_Template, 1, 2, \"ng-template\", null, 20, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵtemplate(3, TuiFileComponent_ng_template_5_ng_template_3_Template, 1, 5, \"ng-template\", null, 21, ɵngcc0.ɵɵtemplateRefExtractor);\n  }\n\n  if (rf & 2) {\n    const _r20 = ɵngcc0.ɵɵreference(2);\n\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r6.preview)(\"ngIfElse\", _r20);\n  }\n}\n\nlet TuiFilesComponent = /*#__PURE__*/(() => {\n  let TuiFilesComponent = class TuiFilesComponent {\n    constructor(hideText$, showAllText$) {\n      this.hideText$ = hideText$;\n      this.showAllText$ = showAllText$;\n      this.items = null;\n      this.max = 0;\n      this.hidden = true;\n    }\n\n    get hasExtraItems() {\n      var _a, _b;\n\n      return !!this.max && ((_b = (_a = this.items) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) > this.max;\n    }\n\n    toggle() {\n      this.hidden = !this.hidden;\n    }\n\n  };\n\n  TuiFilesComponent.ɵfac = function TuiFilesComponent_Factory(t) {\n    return new (t || TuiFilesComponent)(ɵngcc0.ɵɵdirectiveInject(TUI_HIDE_TEXT), ɵngcc0.ɵɵdirectiveInject(TUI_SHOW_ALL_TEXT));\n  };\n\n  TuiFilesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TuiFilesComponent,\n    selectors: [[\"tui-files\"]],\n    contentQueries: function TuiFilesComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, TuiItemDirective, 4, TemplateRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.items = _t);\n      }\n    },\n    inputs: {\n      max: \"max\"\n    },\n    ngContentSelectors: _c0,\n    decls: 7,\n    vars: 7,\n    consts: [[4, \"ngIf\"], [\"tuiGroup\", \"\", \"orientation\", \"vertical\", 1, \"t-files\", 3, \"collapsed\"], [4, \"ngFor\", \"ngForOf\"], [3, \"expanded\", 4, \"ngIf\"], [\"tuiButton\", \"\", \"appearance\", \"outline\", \"size\", \"m\", \"class\", \"t-button\", 3, \"t-button_collapsed\", \"click\", 4, \"ngIf\"], [3, \"ngTemplateOutlet\", 4, \"ngIf\"], [3, \"ngTemplateOutlet\"], [3, \"expanded\"], [1, \"t-extra-items\"], [\"tuiButton\", \"\", \"appearance\", \"outline\", \"size\", \"m\", 1, \"t-button\", 3, \"click\"]],\n    template: function TuiFilesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, TuiFilesComponent_ng_container_0_Template, 1, 0, \"ng-container\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵelementStart(2, \"section\", 1);\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵtemplate(4, TuiFilesComponent_ng_container_4_Template, 2, 1, \"ng-container\", 2);\n        ɵngcc0.ɵɵtemplate(5, TuiFilesComponent_tui_expand_5_Template, 3, 2, \"tui-expand\", 3);\n        ɵngcc0.ɵɵtemplate(6, TuiFilesComponent_button_6_Template, 3, 5, \"button\", 4);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 5, ctx.items == null ? null : ctx.items.changes));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"collapsed\", true);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.items);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasExtraItems);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasExtraItems);\n      }\n    },\n    directives: [ɵngcc1.NgIf, ɵngcc2.TuiGroupDirective, ɵngcc1.NgForOf, ɵngcc1.NgTemplateOutlet, ɵngcc2.TuiExpandComponent, ɵngcc2.TuiButtonComponent],\n    pipes: [ɵngcc1.AsyncPipe],\n    styles: [\"tui-files{display:block}.t-files{position:relative;display:block;width:100%;height:100%;border-radius:var(--tui-radius-m);overflow:hidden}.t-button{z-index:3;width:100%;background:var(--tui-base-01)}.t-button_collapsed{box-shadow:0 1.125rem 1.875rem rgba(0,0,0,.48);margin-top:-1.5rem}.t-extra-items tui-file{border-radius:0;margin-top:0;margin-bottom:-.0625rem}\"],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n\n  __decorate([ContentChildren(TuiItemDirective, {\n    read: TemplateRef\n  })], TuiFilesComponent.prototype, \"items\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiFilesComponent.prototype, \"max\", void 0);\n\n  TuiFilesComponent = __decorate([__param(0, Inject(TUI_HIDE_TEXT)), __param(1, Inject(TUI_SHOW_ALL_TEXT))], TuiFilesComponent); // @dynamic\n\n  return TuiFilesComponent;\n})();\nlet TuiFileComponent = /*#__PURE__*/(() => {\n  let TuiFileComponent = class TuiFileComponent {\n    constructor(isMobile, sanitizer, fileTexts$, units$) {\n      this.isMobile = isMobile;\n      this.sanitizer = sanitizer;\n      this.fileTexts$ = fileTexts$;\n      this.units$ = units$;\n      this.file = {\n        name: ''\n      };\n      this.state = 'normal';\n      this.size = 'm';\n      this.showSize = true;\n      this.leftContent = '';\n      this.removed = new EventEmitter();\n      this.focused = false;\n    }\n\n    get preview() {\n      return this.isBig ? this.createPreview(this.file, this.sanitizer) : '';\n    }\n\n    get isBig() {\n      return this.size === 'l';\n    }\n\n    get isLoading() {\n      return this.state === \"loading\"\n      /* Loading */\n      ;\n    }\n\n    get isError() {\n      return this.state === \"error\"\n      /* Error */\n      ;\n    }\n\n    get isDeleted() {\n      return this.state === \"deleted\"\n      /* Deleted */\n      ;\n    }\n\n    get allowDelete() {\n      return !!this.removed.observers.length;\n    }\n\n    get icon() {\n      if (this.state === \"normal\"\n      /* Normal */\n      && this.isBig) {\n        return 'tuiIconDefaultDocLarge';\n      }\n\n      switch (this.state) {\n        case \"deleted\"\n        /* Deleted */\n        :\n          return 'tuiIconTrashLarge';\n\n        case \"error\"\n        /* Error */\n        :\n          return 'tuiIconAlertCircleLarge';\n\n        default:\n          return 'tuiIconCheckCircleLarge';\n      }\n    }\n\n    get src() {\n      return this.file.src || '';\n    }\n\n    get name() {\n      return this.getName(this.file);\n    }\n\n    get type() {\n      return this.getType(this.file);\n    }\n\n    get content$() {\n      return this.calculateContent$(this.state, this.file, this.fileTexts$);\n    }\n\n    get fileSize$() {\n      return this.calculateFileSize$(this.file, this.units$);\n    }\n\n    onRemoveClick() {\n      this.removed.emit();\n    }\n\n    onFocusVisible(focusVisible) {\n      this.focused = focusVisible;\n    }\n\n    calculateContent$(state, file, fileTexts$) {\n      return state === \"error\"\n      /* Error */\n      && !file.content ? fileTexts$.pipe(map(texts => texts.loadingError)) : of(this.file.content || '');\n    }\n\n    calculateFileSize$(file, units$) {\n      return units$.pipe(map(units => formatSize(units, file.size)));\n    }\n\n    createPreview(file, sanitizer) {\n      if (file.src) {\n        return file.src;\n      } // TODO: iframe warning\n\n\n      if (file instanceof File && file.type && file.type.startsWith('image/')) {\n        return sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(file));\n      }\n\n      return '';\n    }\n\n    getName(file) {\n      return file.name.split('.').slice(0, -1).join('.');\n    }\n\n    getType(file) {\n      return `.${file.name.split('.').pop()}` || '';\n    }\n\n  };\n\n  TuiFileComponent.ɵfac = function TuiFileComponent_Factory(t) {\n    return new (t || TuiFileComponent)(ɵngcc0.ɵɵdirectiveInject(TUI_IS_MOBILE), ɵngcc0.ɵɵdirectiveInject(DomSanitizer), ɵngcc0.ɵɵdirectiveInject(TUI_FILE_TEXTS), ɵngcc0.ɵɵdirectiveInject(TUI_DIGITAL_INFORMATION_UNITS));\n  };\n\n  TuiFileComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TuiFileComponent,\n    selectors: [[\"tui-file\"]],\n    hostVars: 4,\n    hostBindings: function TuiFileComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"_focused\", ctx.focused)(\"_link\", ctx.src);\n      }\n    },\n    inputs: {\n      file: \"file\",\n      state: \"state\",\n      size: \"size\",\n      showSize: \"showSize\",\n      leftContent: \"leftContent\"\n    },\n    outputs: {\n      removed: \"removed\"\n    },\n    ngContentSelectors: _c0,\n    decls: 7,\n    vars: 2,\n    consts: [[3, \"ngTemplateOutlet\", 4, \"ngIf\", \"ngIfElse\"], [\"withLink\", \"\"], [\"fileInfoTemplate\", \"\"], [\"defaultLeftContent\", \"\"], [3, \"ngTemplateOutlet\"], [\"rel\", \"noreferrer noopener\", \"target\", \"_blank\", 1, \"t-link\", 3, \"href\", \"tuiFocusVisibleChange\"], [4, \"ngTemplateOutlet\"], [\"polymorpheus-outlet\", \"\", 1, \"t-preview\", 3, \"content\"], [1, \"t-wrapper\"], [1, \"t-text\"], [\"automation-id\", \"tui-file__name\", 1, \"t-name\"], [\"automation-id\", \"tui-file__type\", 1, \"t-type\"], [\"automation-id\", \"tui-file__size\", \"class\", \"t-size\", 4, \"ngIf\"], [\"polymorpheus-outlet\", \"\", \"automation-id\", \"tui-file__content\", \"class\", \"t-content\", 3, \"content\", 4, \"ngIf\"], [4, \"ngIf\"], [\"automation-id\", \"tui-file__size\", 1, \"t-size\"], [\"polymorpheus-outlet\", \"\", \"automation-id\", \"tui-file__content\", 1, \"t-content\", 3, \"content\"], [\"automation-id\", \"tui-file__remove\", \"tuiIconButton\", \"\", \"type\", \"button\", \"size\", \"xs\", \"icon\", \"tuiIconCloseLarge\", \"appearance\", \"icon\", \"class\", \"t-remove\", 3, \"title\", \"t-remove_mobile\", \"click.prevent\", 4, \"ngIf\"], [\"automation-id\", \"tui-file__remove\", \"tuiIconButton\", \"\", \"type\", \"button\", \"size\", \"xs\", \"icon\", \"tuiIconCloseLarge\", \"appearance\", \"icon\", 1, \"t-remove\", 3, \"title\", \"click.prevent\"], [\"automation-id\", \"tui-file__preview\", \"class\", \"t-image\", 3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"loader\", \"\"], [\"svg\", \"\"], [\"automation-id\", \"tui-file__preview\", 1, \"t-image\", 3, \"src\"], [\"automation-id\", \"tui-file__loader\", \"class\", \"t-loader\", 3, \"inheritColor\", 4, \"ngIf\", \"ngIfElse\"], [\"automation-id\", \"tui-file__loader\", 1, \"t-loader\", 3, \"inheritColor\"], [\"automation-id\", \"tui-file__icon\", 1, \"t-icon\", 3, \"src\"]],\n    template: function TuiFileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, TuiFileComponent_ng_container_0_Template, 1, 1, \"ng-container\", 0);\n        ɵngcc0.ɵɵtemplate(1, TuiFileComponent_ng_template_1_Template, 2, 2, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵtemplate(3, TuiFileComponent_ng_template_3_Template, 13, 12, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵtemplate(5, TuiFileComponent_ng_template_5_Template, 5, 2, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(2);\n\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.src)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [ɵngcc1.NgIf, ɵngcc1.NgTemplateOutlet, ɵngcc4.TuiFocusVisibleDirective, ɵngcc5.PolymorpheusOutletComponent, ɵngcc2.TuiButtonComponent, ɵngcc2.TuiLoaderComponent, ɵngcc2.TuiSvgComponent],\n    pipes: [ɵngcc1.AsyncPipe],\n    styles: [\"[_nghost-%COMP%]{position:relative;display:flex;align-items:center;font:var(--tui-font-text-m);border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m)}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-01-night)}[_nghost-%COMP%]:not(._link){padding:.5625rem 2.1875rem .5625rem .5625rem}[_nghost-%COMP%]:hover   .t-remove[_ngcontent-%COMP%]{opacity:1}._focused[_nghost-%COMP%]{border-color:var(--tui-focus);box-shadow:0 0 0 1px inset var(--tui-focus)}.t-link[_ngcontent-%COMP%]{display:flex;flex:1;padding:.5625rem 2.1875rem .5625rem .5625rem;text-decoration:none;outline:0;cursor:pointer;color:var(--tui-text-01);max-width:calc(100% - 2.75rem)}.t-link[_ngcontent-%COMP%]:hover{background-color:var(--tui-base-02)}.t-preview[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;flex-shrink:0;width:1.5rem;height:1.5rem;margin-right:.75rem;border-radius:var(--tui-radius-m);overflow:hidden;color:var(--tui-base-06)}.t-preview_big[_ngcontent-%COMP%]{width:4rem;height:4rem;margin-right:1rem}.t-preview_big[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:'';background:var(--tui-base-08);opacity:.08}.t-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.t-loader[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.t-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;color:var(--tui-success-fill)}.t-icon_error[_ngcontent-%COMP%]{color:var(--tui-error-fill)}.t-icon_deleted[_ngcontent-%COMP%]{color:var(--tui-base-06)}.t-remove[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration,300ms);transition-timing-function:ease-in-out;position:absolute;top:.625rem;right:.625rem;opacity:0}.t-remove[_ngcontent-%COMP%]:focus, .t-remove_mobile[_ngcontent-%COMP%]{opacity:1}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;overflow:hidden}.t-text[_ngcontent-%COMP%]{display:flex}.t-size[_ngcontent-%COMP%]{flex-shrink:0;opacity:var(--tui-disabled-opacity);margin-left:.5rem}.t-type[_ngcontent-%COMP%]{flex-shrink:0}.t-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-error-fill)}\"],\n    changeDetection: 0\n  });\n\n  __decorate([Input(), tuiDefaultProp()], TuiFileComponent.prototype, \"file\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiFileComponent.prototype, \"state\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiFileComponent.prototype, \"size\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiFileComponent.prototype, \"showSize\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiFileComponent.prototype, \"leftContent\", void 0);\n\n  __decorate([Output()], TuiFileComponent.prototype, \"removed\", void 0);\n\n  __decorate([HostBinding('class._focused')], TuiFileComponent.prototype, \"focused\", void 0);\n\n  __decorate([HostBinding('class._link')], TuiFileComponent.prototype, \"src\", null);\n\n  __decorate([tuiPure], TuiFileComponent.prototype, \"calculateContent$\", null);\n\n  __decorate([tuiPure], TuiFileComponent.prototype, \"calculateFileSize$\", null);\n\n  __decorate([tuiPure], TuiFileComponent.prototype, \"createPreview\", null);\n\n  __decorate([tuiPure], TuiFileComponent.prototype, \"getName\", null);\n\n  __decorate([tuiPure], TuiFileComponent.prototype, \"getType\", null);\n\n  TuiFileComponent = __decorate([__param(0, Inject(TUI_IS_MOBILE)), __param(1, Inject(DomSanitizer)), __param(2, Inject(TUI_FILE_TEXTS)), __param(3, Inject(TUI_DIGITAL_INFORMATION_UNITS))], TuiFileComponent);\n  return TuiFileComponent;\n})();\nlet TuiFilesModule = /*#__PURE__*/(() => {\n  let TuiFilesModule = class TuiFilesModule {};\n\n  TuiFilesModule.ɵfac = function TuiFilesModule_Factory(t) {\n    return new (t || TuiFilesModule)();\n  };\n\n  TuiFilesModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiFilesModule\n  });\n  TuiFilesModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiGroupModule, TuiLoaderModule, PolymorpheusModule, TuiSvgModule, TuiFocusVisibleModule, TuiButtonModule, TuiItemModule, TuiExpandModule]]\n  });\n  return TuiFilesModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiFilesModule, {\n    declarations: function () {\n      return [TuiFilesComponent, TuiFileComponent];\n    },\n    imports: function () {\n      return [CommonModule, TuiGroupModule, TuiLoaderModule, PolymorpheusModule, TuiSvgModule, TuiFocusVisibleModule, TuiButtonModule, TuiItemModule, TuiExpandModule];\n    },\n    exports: function () {\n      return [TuiFilesComponent, TuiFileComponent, TuiItemDirective];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { TuiFilesComponent, TuiFilesModule, TuiFileComponent as ɵa }; //# sourceMappingURL=taiga-ui-kit-components-files.js.map","map":null,"metadata":{},"sourceType":"module"}