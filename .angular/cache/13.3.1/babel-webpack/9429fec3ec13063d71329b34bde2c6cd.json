{"ast":null,"code":"import { __decorate } from 'tslib';\nimport { Input, HostBinding, Component, ChangeDetectionStrategy, NgModule } from '@angular/core';\nimport { tuiDefaultProp, tuiRequiredSetter } from '@taiga-ui/cdk';\nimport { sizeBigger } from '@taiga-ui/core';\nimport { stringHashToHsl } from '@taiga-ui/kit/utils/format';\nimport { CommonModule } from '@angular/common';\nimport { TuiLazyLoadingModule } from '@taiga-ui/kit/directives';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nimport * as ɵngcc2 from '@taiga-ui/kit/directives';\n\nfunction TuiAvatarComponent_img_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"img\", 2);\n    ɵngcc0.ɵɵlistener(\"error\", function TuiAvatarComponent_img_0_Template_img_error_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r2);\n      const ctx_r1 = ɵngcc0.ɵɵnextContext();\n      return ctx_r1.onError();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r0.avatarUrl, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵattribute(\"alt\", ctx_r0.text);\n  }\n}\n\nlet TuiAvatarComponent = /*#__PURE__*/(() => {\n  let TuiAvatarComponent = class TuiAvatarComponent {\n    constructor() {\n      this.size = 'm';\n      this.text = '';\n      this.autoColor = false;\n      this.rounded = false;\n      this.avatarUrl = null;\n      this.isUrlValid = false;\n    }\n\n    set avatarUrlSetter(avatarUrl) {\n      this.isUrlValid = !!avatarUrl;\n      this.avatarUrl = avatarUrl;\n    }\n\n    get bgColor() {\n      return this.autoColor ? stringHashToHsl(this.text) : '';\n    }\n\n    get hasAvatar() {\n      return this.avatarUrl !== null && this.isUrlValid;\n    }\n\n    get computedText() {\n      if (this.hasAvatar || this.text === '') {\n        return '';\n      }\n\n      const words = this.text.split(' ');\n      return words.length > 1 && sizeBigger(this.size) ? words[0].substr(0, 1) + words[1].substr(0, 1) : words[0].substr(0, 1);\n    }\n\n    onError() {\n      this.isUrlValid = false;\n    }\n\n  };\n\n  TuiAvatarComponent.ɵfac = function TuiAvatarComponent_Factory(t) {\n    return new (t || TuiAvatarComponent)();\n  };\n\n  TuiAvatarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: TuiAvatarComponent,\n    selectors: [[\"tui-avatar\"]],\n    hostVars: 7,\n    hostBindings: function TuiAvatarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"data-size\", ctx.size);\n        ɵngcc0.ɵɵstyleProp(\"background\", ctx.bgColor);\n        ɵngcc0.ɵɵclassProp(\"_rounded\", ctx.rounded)(\"_has-avatar\", ctx.hasAvatar);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      text: \"text\",\n      autoColor: \"autoColor\",\n      rounded: \"rounded\",\n      avatarUrlSetter: [\"avatarUrl\", \"avatarUrlSetter\"]\n    },\n    decls: 3,\n    vars: 2,\n    consts: [[\"loading\", \"lazy\", \"class\", \"image\", 3, \"src\", \"error\", 4, \"ngIf\"], [1, \"text\"], [\"loading\", \"lazy\", 1, \"image\", 3, \"src\", \"error\"]],\n    template: function TuiAvatarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, TuiAvatarComponent_img_0_Template, 1, 2, \"img\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"span\", 1);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isUrlValid);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.computedText);\n      }\n    },\n    directives: [ɵngcc1.NgIf, ɵngcc2.TuiLazyLoadingDirective],\n    styles: [\"[_nghost-%COMP%]{position:relative;display:flex;flex-shrink:0;border-radius:var(--tui-radius-m);color:var(--tui-secondary-active);text-align:center;text-transform:uppercase;justify-content:center;align-items:center;background-color:currentColor;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}[data-size=xs][_nghost-%COMP%]{font:var(--tui-font-text-s);width:1.5rem;height:1.5rem}[data-size='s'][_nghost-%COMP%]{font:var(--tui-font-text-m);width:2rem;height:2rem}[data-size='m'][_nghost-%COMP%]{font:var(--tui-font-text-l);width:3rem;height:3rem}[data-size='l'][_nghost-%COMP%]{font:var(--tui-font-heading-5);width:4rem;height:4rem;border-radius:var(--tui-radius-l)}[data-size=xl][_nghost-%COMP%]{font:var(--tui-font-heading-3);width:6rem;height:6rem;border-radius:var(--tui-radius-l)}[data-size=xxl][_nghost-%COMP%]{font:var(--tui-font-heading-1);width:9rem;height:9rem;border-radius:var(--tui-radius-l)}._has-avatar[_nghost-%COMP%]{background-color:transparent}._rounded[_nghost-%COMP%]{border-radius:100%}.image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.text[_ngcontent-%COMP%]{color:var(--tui-text-01)}\"],\n    changeDetection: 0\n  });\n\n  __decorate([Input(), HostBinding('attr.data-size'), tuiDefaultProp()], TuiAvatarComponent.prototype, \"size\", void 0);\n\n  __decorate([Input('avatarUrl'), tuiRequiredSetter()], TuiAvatarComponent.prototype, \"avatarUrlSetter\", null);\n\n  __decorate([Input(), tuiDefaultProp()], TuiAvatarComponent.prototype, \"text\", void 0);\n\n  __decorate([Input(), tuiDefaultProp()], TuiAvatarComponent.prototype, \"autoColor\", void 0);\n\n  __decorate([Input(), HostBinding('class._rounded'), tuiDefaultProp()], TuiAvatarComponent.prototype, \"rounded\", void 0);\n\n  __decorate([HostBinding('style.background')], TuiAvatarComponent.prototype, \"bgColor\", null);\n\n  __decorate([HostBinding('class._has-avatar')], TuiAvatarComponent.prototype, \"hasAvatar\", null);\n\n  return TuiAvatarComponent;\n})();\nlet TuiAvatarModule = /*#__PURE__*/(() => {\n  let TuiAvatarModule = class TuiAvatarModule {};\n\n  TuiAvatarModule.ɵfac = function TuiAvatarModule_Factory(t) {\n    return new (t || TuiAvatarModule)();\n  };\n\n  TuiAvatarModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: TuiAvatarModule\n  });\n  TuiAvatarModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, TuiLazyLoadingModule]]\n  });\n  return TuiAvatarModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(TuiAvatarModule, {\n    declarations: function () {\n      return [TuiAvatarComponent];\n    },\n    imports: function () {\n      return [CommonModule, TuiLazyLoadingModule];\n    },\n    exports: function () {\n      return [TuiAvatarComponent];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { TuiAvatarComponent, TuiAvatarModule }; //# sourceMappingURL=taiga-ui-kit-components-avatar.js.map","map":null,"metadata":{},"sourceType":"module"}